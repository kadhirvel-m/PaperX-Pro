<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Paper X — Romantasy Realms · HoloGrid</title>
    <meta name="description" content="A modern, futuristic romantasy explorer built for speed." />
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon.svg">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,600,0,0&display=swap"
        rel="stylesheet">

    <!-- Tailwind -->
    <link rel="stylesheet" href="../assets/css/tailwind.css" />
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                container: { center: true, padding: '1rem' },
                extend: {
                    fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui', 'sans-serif'] },
                    colors: {
                        /* Core brand (same as index/about) */
                        brand: { 900: '#1E1E2F', 700: '#4C2A59', 500: '#9E4B8A' },
                        /* Light scale for backgrounds & subtle surfaces */
                        brandlt: { 50: '#FAF5FB', 100: '#F3E7F2', 200: '#E7D0E4', 300: '#D9B4D3', 400: '#C88DBA', 500: '#9E4B8A', 700: '#4C2A59', 900: '#1E1E2F' },
                        accent: { 400: '#C272F3', 300: '#9E4BCE' },
                        ink: '#1E1E2F', plum: '#4C2A59', orchid: '#9E4B8A'
                    },
                    boxShadow: {
                        glow: '0 10px 30px -8px rgba(194,114,243,.45)',
                        soft: '0 10px 30px rgba(0,0,0,0.25)',
                        card: '0 24px 60px rgba(30,30,47,0.35)'
                    },
                    backgroundImage: {
                        'hero-dark': 'radial-gradient(1000px 600px at 50% -10%, rgba(158,75,138,0.28), transparent 60%), linear-gradient(180deg, #1E1E2F 0%, #201934 35%, #141321 100%)',
                        'hero-light': 'radial-gradient(1000px 600px at 50% -10%, rgba(158,75,138,0.18), transparent 60%), linear-gradient(180deg, #FFFFFF 0%, #FBF8FC 45%, #F7F2F9 100%)'
                    }
                }
            }
        }
    </script>

    <style>
        [x-cloak] {
            display: none
        }

        :root {
            --grid: linear-gradient(transparent 98%, rgba(158, 75, 138, .08) 99%), linear-gradient(90deg, transparent 98%, rgba(158, 75, 138, .08) 99%)
        }

        /* Background: fast, futuristic, zero jank */
        .bg-holo {
            background:
                radial-gradient(60rem 40rem at 12% -10%, rgba(194, 114, 243, .20), transparent 60%),
                radial-gradient(50rem 30rem at 88% 110%, rgba(76, 42, 89, .25), transparent 60%),
                linear-gradient(#0f0f18, #161429 40%, #0f0f18);
            position: relative
        }

        .bg-holo:after {
            /* ultra‑light scanlines */
            content: "";
            position: absolute;
            inset: 0;
            pointer-events: none;
            background: repeating-linear-gradient(180deg, rgba(255, 255, 255, .04) 0 1px, transparent 1px 3px);
            mix-blend-mode: overlay;
            opacity: .35
        }

        .material-symbols-rounded {
            vertical-align: -6px
        }

        /* Gradient hero text (shared with index page) */
        .gradient-hero-text {
            display: inline-block;
            /* ensure background sizing ties to content */
            background-image: linear-gradient(90deg, #1E1E2F, #4C2A59, #9E4B8A, #4C2A59, #1E1E2F);
            background-size: 200% 200%;
            animation: gradient-shift 4s ease-in-out infinite;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            -webkit-box-decoration-break: clone;
            box-decoration-break: clone;
        }

        .dark .gradient-hero-text {
            background-image: linear-gradient(90deg, #EFA3DC, #CA6CB3, #FFFFFF, #CA6CB3, #EFA3DC);
        }

        /* Unified media overlay for readability (adds subtle dark scrim in both themes, stronger in light) */
        .media-overlay:before {
            content: "";
            position: absolute;
            inset: 0;
            /* Stronger base for light mode; dark mode variant below */
            background: linear-gradient(to top, rgba(0, 0, 0, .68), rgba(0, 0, 0, .50) 38%, rgba(0, 0, 0, .18) 60%, rgba(0, 0, 0, 0) 72%);
            pointer-events: none;
            transition: background .35s ease;
        }

        html.dark .media-overlay:before {
            background: linear-gradient(to top, rgba(15, 15, 24, .82), rgba(15, 15, 24, .60) 40%, rgba(15, 15, 24, .15) 62%, rgba(15, 15, 24, 0) 74%);
        }

        /* Ensure text inside media-overlay wrappers stays readable (reset earlier adaptive neutrals) */
        .media-overlay h3,
        .media-overlay h4,
        .media-overlay h2,
        .media-overlay p,
        .media-overlay span,
        .media-overlay .tagline-text {
            color: #ffffff !important;
            text-shadow: 0 2px 4px rgba(0, 0, 0, .35);
        }

        @keyframes gradient-shift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Rail dots */
        .rail-dot {
            box-shadow: 0 0 0 2px rgba(158, 75, 138, .18), 0 8px 18px -6px rgba(194, 114, 243, .55)
        }

        /* Holo card edge */
        .holo-edge {
            position: relative
        }

        .holo-edge:before {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: 1rem;
            padding: 1px;
            background: linear-gradient(135deg, rgba(255, 255, 255, .35), rgba(158, 75, 138, .35));
            -webkit-mask:
                linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
            -webkit-mask-composite: xor;
            mask:
                linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
            mask-composite: exclude
        }

        /* Angular mask for hero */
        .clip-hero {
            clip-path: polygon(0 0, 100% 0, 100% 85%, 65% 100%, 0 100%)
        }

        .theme-fade {
            transition: background-color .35s ease, color .35s ease, border-color .35s ease;
        }

        /* Light mode overrides */
        html.light:not(.dark) .bg-holo {
            background:
                radial-gradient(60rem 40rem at 12% -10%, rgba(194, 114, 243, .10), transparent 60%),
                radial-gradient(50rem 30rem at 88% 110%, rgba(76, 42, 89, .10), transparent 60%),
                linear-gradient(#f5f7fb, #e9edf4 40%, #f5f7fb);
        }

        html.light:not(.dark) .bg-holo:after {
            opacity: .15
        }

        html.light:not(.dark) body {
            color: #1f2937
        }

        html.light:not(.dark) .holo-edge {
            background: #ffffff !important;
            color: #1f2937
        }

        html.light:not(.dark) .holo-edge:before {
            background: linear-gradient(135deg, rgba(0, 0, 0, .08), rgba(158, 75, 138, .25))
        }

        html.light:not(.dark) .rail-dot {
            box-shadow: 0 0 0 2px rgba(0, 0, 0, .12), 0 6px 14px -6px rgba(158, 75, 138, .35)
        }

        html.light:not(.dark) .title-prism {
            background: linear-gradient(90deg, #9E4BCE, #4C2A59, #9E4BCE, #C272F3);
            color: transparent
        }

        html.light:not(.dark) [class*='text-white/70'] {
            color: rgba(55, 65, 81, .8) !important
        }

        html.light:not(.dark) [class*='text-white/60'] {
            color: rgba(55, 65, 81, .65) !important
        }

        html.light:not(.dark) [class*='text-white/50'] {
            color: rgba(55, 65, 81, .55) !important
        }

        html.light:not(.dark) [class*='text-white/40'] {
            color: rgba(55, 65, 81, .45) !important
        }

        /* Light mode override for generic .text-white removed to allow purposeful white on imagery; 
           keep targeted faded utilities above. If you need to force-convert white text globally again,
           reintroduce a scoped rule (e.g., html.light:not(.dark) body:not(.allow-true-white) .text-white { ... }). */

        html.light:not(.dark) [class*='text-white/80'] {
            color: rgba(31, 41, 55, .80) !important;
        }

        html.light:not(.dark) [class*='text-white/90'] {
            color: rgba(17, 24, 39, .90) !important;
        }

        html.light:not(.dark) footer {
            color: rgba(55, 65, 81, .55) !important
        }

        html.light:not(.dark) .ring-white\/10 {
            --tw-ring-color: rgba(0, 0, 0, .08) !important
        }

        html.light:not(.dark) .ring-white\/15 {
            --tw-ring-color: rgba(0, 0, 0, .12) !important
        }

        html.light:not(.dark) .bg-white\/\[\.04\] {
            background-color: rgba(0, 0, 0, .025) !important
        }

        html.light:not(.dark) .bg-white\/10 {
            background-color: rgba(0, 0, 0, .05) !important
        }

        html.light:not(.dark) .bg-white\/20 {
            background-color: rgba(0, 0, 0, .10) !important
        }

        html.light:not(.dark) header {
            background-color: rgba(255, 255, 255, .65)
        }

        html.light:not(.dark) .material-symbols-rounded {
            color: #4b5563
        }

        @media (prefers-reduced-motion: reduce) {
            .title-prism {
                animation: none
            }

            .theme-fade {
                transition: none;
            }
        }
    </style>

    <script>(() => { let s = null; try { s = localStorage.getItem('px_theme') } catch (e) { }; const prefers = matchMedia('(prefers-color-scheme: dark)').matches; const dark = s ? s === 'dark' : prefers; if (dark) { document.documentElement.classList.add('dark'); } else { document.documentElement.classList.add('light'); } })();</script>
    <!-- Alpine.js plugins -->
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/trap@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body x-data="romantasyApp()" x-init="init()"
    class="min-h-screen font-sans antialiased text-neutral-900 dark:text-white bg-hero-light dark:bg-hero-dark theme-fade">

    <!-- Left Neon Rail -->
    <aside class="fixed left-4 top-1/2 -translate-y-1/2 z-30 hidden md:block">
        <div class="flex flex-col items-center gap-4">
            <button @click="viewMode='grid'"
                :class="'w-3.5 h-3.5 rounded-full bg-white/70 rail-dot '+(viewMode==='grid'?'ring-2 ring-accent-400':'opacity-60')"
                aria-label="Grid"></button>
            <button @click="viewMode='mosaic'"
                :class="'w-3.5 h-3.5 rounded-full bg-white/70 rail-dot '+(viewMode==='mosaic'?'ring-2 ring-accent-400':'opacity-60')"
                aria-label="Mosaic"></button>
            <button @click="viewMode='list'"
                :class="'w-3.5 h-3.5 rounded-full bg-white/70 rail-dot '+(viewMode==='list'?'ring-2 ring-accent-400':'opacity-60')"
                aria-label="List"></button>
            <div class="w-px h-20 bg-gradient-to-b from-white/40 to-transparent"></div>
            <button @click="toggleTheme()"
                class="p-2 rounded-full bg-white/10 hover:bg-white/20 flex flex-col items-center"
                :aria-label="isDark ? 'Switch to light mode' : 'Switch to dark mode'">
                <span class="material-symbols-rounded" x-text="isDark ? 'light_mode' : 'dark_mode'"></span>
                <span class="mt-0.5 text-[9px] font-medium" x-text="isDark ? 'Light' : 'Dark'"></span>
            </button>
        </div>
    </aside>

    <!-- Header (adapted from main site navbar) -->
    <header
        class="sticky top-0 z-40 bg-white/70 dark:bg-[#0f0f18]/70 backdrop-blur supports-[backdrop-filter]:saturate-150 border-b border-black/5 dark:border-white/10 relative">
        <div class="container flex items-center justify-between py-3 md:py-4">
            <a href="../../ui/index.html" class="flex items-center gap-3" aria-label="Paper X Home">
                <img src="../assets/img/logo-light.svg" alt="Paper X" class="h-9 w-auto dark:hidden">
                <img src="../assets/img/logo-dark.svg" alt="Paper X" class="h-9 w-auto hidden dark:block">
                <span
                    class="text-xs md:text-sm font-medium tracking-wider text-neutral-700 dark:text-white/70">Romantasy</span>
            </a>
            <div class="flex items-center gap-4">
                <div class="relative hidden sm:block">
                    <input x-model="search" placeholder="Search realms…"
                        class="w-56 md:w-72 rounded-full bg-black/5 dark:bg-white/10 pl-10 pr-4 py-2 text-sm placeholder:text-neutral-500 dark:placeholder:text-white/50 outline-none ring-1 ring-black/10 dark:ring-white/10 focus:ring-accent-400/60" />
                    <span
                        class="material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-neutral-600 dark:text-white/60">search</span>
                </div>
                <button @click="viewMode='grid'"
                    class="hidden md:inline-flex items-center gap-1 text-xs px-3 py-1.5 rounded-full ring-1 transition select-none ring-black/10 dark:ring-white/15 hover:bg-black/5 dark:hover:bg-white/10 text-neutral-700 dark:text-white/70"
                    :class="viewMode==='grid'? 'bg-gradient-to-r from-[#9E4B8A] via-[#B06AB3] to-[#FF7FD1] text-white shadow-glow ring-brand-500/40 hover:from-[#A65592] hover:via-[#BB76BC] hover:to-[#FF8AD5]' : ''">Grid</button>
                <button @click="viewMode='mosaic'"
                    class="hidden md:inline-flex items-center gap-1 text-xs px-3 py-1.5 rounded-full ring-1 transition select-none ring-black/10 dark:ring-white/15 hover:bg-black/5 dark:hover:bg-white/10 text-neutral-700 dark:text-white/70"
                    :class="viewMode==='mosaic'? 'bg-gradient-to-r from-[#9E4B8A] via-[#B06AB3] to-[#FF7FD1] text-white shadow-glow ring-brand-500/40 hover:from-[#A65592] hover:via-[#BB76BC] hover:to-[#FF8AD5]' : ''">Mosaic</button>
                <button @click="viewMode='list'"
                    class="hidden md:inline-flex items-center gap-1 text-xs px-3 py-1.5 rounded-full ring-1 transition select-none ring-black/10 dark:ring-white/15 hover:bg-black/5 dark:hover:bg-white/10 text-neutral-700 dark:text-white/70"
                    :class="viewMode==='list'? 'bg-gradient-to-r from-[#9E4B8A] via-[#B06AB3] to-[#FF7FD1] text-white shadow-glow ring-brand-500/40 hover:from-[#A65592] hover:via-[#BB76BC] hover:to-[#FF8AD5]' : ''">List</button>
                <button @click="toggleTheme()" aria-label="Toggle theme"
                    class="inline-flex items-center justify-center h-10 w-10 rounded-full ring-1 ring-black/10 dark:ring-white/15 hover:bg-black/5 dark:hover:bg-white/10 transition">
                    <span class="material-symbols-rounded" x-text="isDark ? 'light_mode' : 'dark_mode'"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Prism Panel -->
    <section class="container pt-8 md:pt-14 pb-6">
        <div class="grid md:grid-cols-[1.35fr,1fr] gap-6 items-stretch">
            <div class="clip-hero rounded-2xl holo-edge bg-white/[.04] ring-1 ring-white/10 p-6 md:p-8">
                <h1 class="gradient-hero-text text-5xl md:text-7xl font-extrabold leading-[1.02]">Romantasy Realms</h1>
                <p class="mt-4 md:mt-6 text-neutral-700 dark:text-white/70 max-w-xl">Pick a realm, break a vow, remix
                    fate. Minimal motion,
                    maximal vibe. Built for performance on low‑end machines.</p>
                <div class="mt-6 flex flex-wrap gap-2">
                    <button @click="activeFilter='all'" :class="chip('all')">All</button>
                    <template x-for="f in filters" :key="f"><button @click="activeFilter=f" x-text="f"
                            :class="chip(f)"></button></template>
                </div>
            </div>
            <div class="rounded-2xl holo-edge bg-white/[.04] ring-1 ring-white/10 p-0 overflow-hidden">
                <!-- Feature Highlight: top pick -->
                <div class="relative h-full">
                    <img src="../assets/img/img1.png" class="absolute inset-0 w-full h-full object-cover" alt="feature"
                        loading="lazy" decoding="async">
                    <div class="absolute inset-0 media-overlay"></div>
                    <div class="absolute inset-x-0 bottom-0 p-6 z-10 flex flex-col gap-2">
                        <span class="text-[11px] uppercase tracking-widest text-white">Featured</span>
                        <h3 class="text-2xl font-bold text-white">Sample Featured Story</h3>
                        <p class="text-sm text-white max-w-md line-clamp-3">A brief sample tagline showing how a
                            feature card looks with static content.</p>
                        <button
                            class="inline-flex items-center gap-1 mt-2 rounded-full bg-gradient-to-r from-[#9E4B8A] via-[#B06AB3] to-[#FF7FD1] text-white font-semibold text-sm px-4 py-2 shadow-glow hover:from-[#A65592] hover:via-[#BB76BC] hover:to-[#FF8AD5] transition">Open
                            <span class="material-symbols-rounded text-sm">north_east</span></button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- HoloGrid Lanes -->
    <main class="container pb-16">
        <div x-show="viewMode==='grid'" x-transition.opacity.duration.150ms class="grid md:grid-cols-12 gap-6">
            <!-- Lane A (wide) -->
            <section class="md:col-span-7 space-y-6">
                <template x-for="s in filteredStories().slice(0,4)" :key="s.id">
                    <article @click="openStory(s)"
                        class="cursor-pointer rounded-2xl holo-edge bg-white/[.04] ring-1 ring-white/10 overflow-hidden">
                        <div class="grid grid-cols-3 gap-0">
                            <figure class="col-span-1 aspect-[4/3] overflow-hidden"><img :src="s.cover"
                                    class="w-full h-full object-cover" loading="lazy" decoding="async" alt="cover">
                            </figure>
                            <div class="col-span-2 p-5 flex flex-col">
                                <h3 class="text-xl font-bold" x-text="s.title"></h3>
                                <p class="mt-1 text-sm text-neutral-700 dark:text-white/70 line-clamp-2"
                                    x-text="s.tagline"></p>
                                <div class="mt-auto pt-4">
                                    <div class="h-1.5 rounded-full bg-white/10 overflow-hidden">
                                        <div class="h-full bg-accent-300" :style="'width:'+s.progress+'%'"></div>
                                    </div>
                                    <div class="mt-1 text-[11px] text-white/50 flex justify-between"><span
                                            x-text="s.progress+'%'"></span><span x-text="s.chapters+' ch'"></span></div>
                                </div>
                            </div>
                        </div>
                    </article>
                </template>
            </section>

            <!-- Lane B (stack + tiles) -->
            <section class="md:col-span-5 space-y-6">
                <template x-for="s in filteredStories().slice(4,6)" :key="s.id">
                    <article @click="openStory(s)"
                        class="cursor-pointer rounded-2xl holo-edge bg-white/[.04] ring-1 ring-white/10 overflow-hidden">
                        <div class="relative aspect-[16/9]">
                            <img :src="s.cover" class="absolute inset-0 w-full h-full object-cover" loading="lazy"
                                decoding="async" alt="cover">
                            <div class="absolute inset-0 media-overlay"></div>
                            <div class="absolute bottom-0 p-5 media-overlay">
                                <h3 class="text-lg font-bold" x-text="s.title"></h3>
                                <p class="tagline-text text-xs line-clamp-2" x-text="s.tagline"></p>
                            </div>
                        </div>
                    </article>
                </template>

                <div class="grid grid-cols-2 gap-6">
                    <template x-for="s in filteredStories().slice(6,10)" :key="s.id">
                        <article @click="openStory(s)"
                            class="cursor-pointer rounded-2xl holo-edge bg-white/[.04] ring-1 ring-white/10 overflow-hidden">
                            <figure class="aspect-[4/3]"><img :src="s.cover" class="w-full h-full object-cover"
                                    loading="lazy" decoding="async" alt="cover"></figure>
                            <div class="p-4">
                                <h4 class="font-semibold text-sm" x-text="s.title"></h4>
                                <p class="text-[12px] text-white/60 line-clamp-2" x-text="s.tagline"></p>
                            </div>
                        </article>
                    </template>
                </div>
            </section>
        </div>

        <!-- Mosaic -->
        <section x-show="viewMode==='mosaic'" x-transition.opacity.duration.150ms
            class="grid [grid-template-columns:repeat(auto-fill,minmax(220px,1fr))] auto-rows-[200px] gap-6">
            <template x-for="s in filteredStories()" :key="s.id">
                <article @click="openStory(s)"
                    :class="'cursor-pointer rounded-2xl holo-edge bg-white/[.04] ring-1 ring-white/10 overflow-hidden '+span(s)">
                    <figure class="relative w-full h-full">
                        <img :src="s.cover" class="absolute inset-0 w-full h-full object-cover" loading="lazy"
                            decoding="async" alt="cover">
                        <div class="absolute inset-0 media-overlay"></div>
                        <div class="absolute bottom-0 p-3 media-overlay">
                            <h4 class="font-semibold" x-text="s.title"></h4>
                            <p class="tagline-text text-[12px] line-clamp-2" x-text="s.tagline"></p>
                        </div>
                    </figure>
                </article>
            </template>
        </section>

        <!-- List -->
        <section x-show="viewMode==='list'" x-transition.opacity.duration.150ms class="flex flex-col gap-4">
            <template x-for="s in filteredStories()" :key="s.id">
                <article @click="openStory(s)"
                    class="cursor-pointer rounded-xl holo-edge bg-white/[.04] ring-1 ring-white/10 overflow-hidden flex">
                    <figure class="w-56 aspect-[4/3] overflow-hidden"><img :src="s.cover"
                            class="w-full h-full object-cover" loading="lazy" decoding="async" alt="cover"></figure>
                    <div class="p-4 pr-6 flex-1">
                        <h4 class="text-lg font-semibold" x-text="s.title"></h4>
                        <p class="text-sm text-neutral-700 dark:text-white/70 line-clamp-2 max-w-3xl"
                            x-text="s.tagline"></p>
                        <div class="mt-3 w-64">
                            <div class="h-1.5 rounded-full bg-white/10 overflow-hidden">
                                <div class="h-full bg-accent-300" :style="'width:'+s.progress+'%'"></div>
                            </div>
                        </div>
                    </div>
                </article>
            </template>
        </section>

        <!-- Empty -->
        <p x-show="filteredStories().length===0" class="text-center text-white/60 mt-12">No realms match. Try a
            different filter.</p>
    </main>

    <!-- Favorites drawer removed as per request -->

    <!-- Modal -->
    <div x-cloak x-show="modalOpen" x-transition.opacity
        class="fixed inset-0 z-40 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/60" @click="closeModal"></div>
        <div x-trap.noscroll.inert="modalOpen"
            class="relative w-full max-w-3xl rounded-2xl overflow-hidden ring-1 ring-black/10 dark:ring-white/15 bg-white dark:bg-[#0f0f18]"
            x-transition.scale>
            <div class="flex flex-col md:flex-row">
                <div class="relative md:w-1/2 aspect-[4/5] overflow-hidden">
                    <img :src="activeStory?.cover" class="absolute inset-0 w-full h-full object-cover object-center"
                        :alt="activeStory?.title + ' cover large'" />
                    <div class="absolute inset-0 media-overlay"></div>
                </div>
                <div class="md:w-1/2 p-6 md:p-8 text-neutral-800 dark:text-white">
                    <div class="flex items-start justify-between gap-4">
                        <h2 class="text-2xl font-extrabold leading-tight" x-text="activeStory?.title || 'Story Title'">
                            Story Title</h2>
                        <button @click="closeModal" class="rounded-full p-2 bg-white/10 hover:bg-white/20"><span
                                class="material-symbols-rounded">close</span></button>
                    </div>
                    <p class="mt-3 text-sm text-white/80"
                        x-text="activeStory?.description || 'Sample description placeholder for this story detailing its premise and key emotional hooks.'">
                    </p>
                    <div class="mt-5 grid grid-cols-3 gap-3 text-center text-[11px] font-medium">
                        <div class="rounded-xl bg-white/10 p-3"><span class="block text-base font-bold"
                                x-text="activeStory?.chapters"></span>Chapters</div>
                        <div class="rounded-xl bg-white/10 p-3"><span class="block text-base font-bold"
                                x-text="activeStory?.progress + '%' "></span>Progress</div>
                        <div class="rounded-xl bg-white/10 p-3"><span class="block text-base font-bold"
                                x-text="activeStory?.rating"></span>Rating</div>
                    </div>
                    <div class="mt-6 flex flex-wrap gap-3">
                        <button @click="toggleFav(activeStory)"
                            class="inline-flex items-center gap-2 rounded-full px-5 py-2.5 text-sm font-semibold shadow-glow text-white bg-gradient-to-r from-[#9E4B8A] via-[#B06AB3] to-[#FF7FD1] hover:from-[#A65592] hover:via-[#BB76BC] hover:to-[#FF8AD5] transition">
                            <span class="material-symbols-rounded text-base"
                                x-text="activeStory?.fav? 'favorite':'favorite_border'"></span>
                            <span x-text="activeStory?.fav? 'Favorited':'Favorite'"></span>
                        </button>
                        <button @click="queueStory(activeStory)"
                            class="inline-flex items-center gap-2 rounded-full px-5 py-2.5 text-sm font-semibold ring-1 ring-white/20">
                            <span class="material-symbols-rounded text-base">playlist_add</span> Queue</button>
                        <button
                            class="inline-flex items-center gap-2 rounded-full px-5 py-2.5 text-sm font-semibold text-white bg-brand-700 hover:bg-brand-500 transition">
                            <span class="material-symbols-rounded text-base">auto_stories</span> Continue</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="py-10 text-center text-[11px] text-white/50">Arcane narrative © Paper X Demo</footer>

    <script>
        function romantasyApp() {
            return {
                isDark: document.documentElement.classList.contains('dark'),
                stories: [
                    { id: 1, title: 'Sample Moon Pact', tagline: 'A sample tagline about a pact under twin moons.', genres: ['Fae', 'Court'], cover: '../assets/img/img1.png', chapters: 46, progress: 32, rating: '4.8', fav: false, description: 'Sample description for Moon Pact story exploring alliances and shifting court politics.' },
                    { id: 2, title: 'Sample Ember Guild', tagline: 'Rival guilds forge uneasy alchemy.', genres: ['Alchemy', 'Guild'], cover: '../assets/img/img2.png', chapters: 38, progress: 54, rating: '4.6', fav: true, description: 'Sample description of guild intrigue and catalytic experiments.' },
                    { id: 3, title: 'Sample Starlace', tagline: 'Decoding threads of fate.', genres: ['Rebellion', 'Celestial'], cover: '../assets/img/img3.png', chapters: 52, progress: 12, rating: '4.7', fav: false, description: 'Sample description about unraveling celestial control patterns.' },
                    { id: 4, title: 'Sample Thorn Trial', tagline: 'Trials awaken hidden empathy.', genres: ['Trials', 'Dark Bloom'], cover: '../assets/img/img4.png', chapters: 29, progress: 67, rating: '4.5', fav: false, description: 'Sample description on botanical trials reacting to emotions.' },
                    { id: 5, title: 'Sample Rune Sonata', tagline: 'Runic music stabilizes realms.', genres: ['Runes', 'Music'], cover: '../assets/img/img1.png', chapters: 41, progress: 0, rating: '4.4', fav: false, description: 'Sample description on harmonic resonance repairing borders.' },
                    { id: 6, title: 'Sample Relic Pact', tagline: 'Relic selects broken destinies.', genres: ['Relic', 'Prophecy'], cover: '../assets/img/img2.png', chapters: 34, progress: 83, rating: '4.9', fav: true, description: 'Sample description on divergent echo memories.' },
                    { id: 7, title: 'Sample Lumen Warden', tagline: 'Stabilizing flickering towers.', genres: ['Vows', 'Arc Light'], cover: '../assets/img/img3.png', chapters: 55, progress: 21, rating: '4.6', fav: false, description: 'Sample description on auric conduit stability quests.' },
                    { id: 8, title: 'Sample Ash Serenade', tagline: 'Glass harps echo secrets.', genres: ['Elemental', 'Song'], cover: '../assets/img/img4.png', chapters: 27, progress: 9, rating: '4.3', fav: false, description: 'Sample description on ashfall cadence patterns.' }
                ],
                filters: ['Fae', 'Court', 'Alchemy', 'Guild', 'Rebellion', 'Celestial', 'Trials', 'Runes', 'Music', 'Relic', 'Prophecy', 'Vows', 'Elemental', 'Song'],
                activeFilter: 'all',
                search: '',
                modalOpen: false,
                activeStory: null,
                viewMode: 'grid',
                init() { },
                filteredStories() {
                    const term = this.search.trim().toLowerCase();
                    return this.stories.filter(s => {
                        const fOk = this.activeFilter === 'all' || s.genres.includes(this.activeFilter);
                        const tOk = !term || s.title.toLowerCase().includes(term) || s.tagline.toLowerCase().includes(term);
                        return fOk && tOk;
                    });
                },
                favorites() { return this.stories.filter(s => s.fav) },
                span(s) { const n = s.id % 6; if (n === 0) return 'row-span-2 col-span-2 min-h-[410px]'; if (n === 1) return 'row-span-2'; if (n === 2) return 'col-span-2'; return '' },
                chip(f) {
                    const base = 'px-3 py-1.5 rounded-full text-[12px] font-medium focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-brand-500/50 transition';
                    const active = this.activeFilter === f;
                    if (active) {
                        return base + ' text-white shadow-glow ring-1 ring-brand-500/40 bg-gradient-to-r from-[#9E4B8A] via-[#B06AB3] to-[#FF7FD1] hover:from-[#A65592] hover:via-[#BB76BC] hover:to-[#FF8AD5]';
                    }
                    return base + ' ring-1 ' + (this.isDark
                        ? 'bg-white/10 text-white/75 ring-white/15 hover:bg-white/15'
                        : 'bg-brandlt-100 text-ink/80 ring-brandlt-200 hover:bg-brandlt-200');
                },
                toggleFav(s) { s.fav = !s.fav },
                queueStory(s) { s.queued = true },
                openStory(s) { this.activeStory = s; this.modalOpen = true },
                closeModal() { this.modalOpen = false; this.activeStory = null },
                toggleTheme() {
                    const root = document.documentElement;
                    const switchingToDark = !root.classList.contains('dark');
                    if (switchingToDark) {
                        root.classList.add('dark');
                        root.classList.remove('light');
                    } else {
                        root.classList.remove('dark');
                        root.classList.add('light');
                    }
                    this.isDark = switchingToDark;
                    try { localStorage.setItem('px_theme', switchingToDark ? 'dark' : 'light'); } catch (e) { }
                }
            }
        }
    </script>
</body>

</html>