<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RISC Architecture — Paper X</title>
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon.svg">

    <!-- Inter + Material Symbols -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;700&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,600,0,0"
        rel="stylesheet">

    <!-- Tailwind CSS bundle used across Paper X -->
    <link rel="stylesheet" href="../assets/css/tailwind.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Flip.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                container: { center: true, padding: '1rem' },
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'ui-sans-serif', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: { 900: '#1E1E2F', 700: '#4C2A59', 500: '#9E4B8A' },
                        brandlt: {
                            50: '#FAF5FB',
                            100: '#F3E7F2',
                            200: '#E7D0E4',
                            300: '#D9B4D3',
                            400: '#C88DBA',
                            500: '#9E4B8A',
                            700: '#4C2A59',
                            900: '#1E1E2F'
                        },
                        accent: { 400: '#34D399', 500: '#10B981', 900: '#064E3B' },
                        danger: { 400: '#F87171', 500: '#EF4444' }
                    },
                    boxShadow: {
                        glow: '0 8px 30px rgba(158,75,138,0.35)',
                        soft: '0 10px 30px rgba(0,0,0,0.25)',
                        card: '0 24px 60px rgba(30,30,47,0.35)'
                    },
                    backgroundImage: {
                        'hero-dark': 'radial-gradient(900px 520px at 50% -15%, rgba(158,75,138,0.35), transparent 65%), linear-gradient(180deg,#1E1E2F 0%,#201934 55%,#141321 100%)',
                        'hero-light': 'radial-gradient(1000px 560px at 50% -18%, rgba(158,75,138,0.18), transparent 62%), linear-gradient(180deg,#FFFFFF 0%,#FBF8FC 55%,#F7F2F9 100%)'
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            --bg-app: #F7F2F9;
            --bg-card: #FFFFFF;
            --text-head: #1E1E2F;
            --text-body: #2F2F3A;
            --text-sub: #5A5A6B;
            --border: #E5DFEC;
            --primary: #9E4B8A;
        }

        .dark {
            --bg-app: #1E1E2F;
            --bg-card: #201934;
            --text-head: #F3E7F2;
            --text-body: #E8E3EE;
            --text-sub: #C9BED5;
            --border: #3A3247;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
        }

        .lab-shell {
            min-height: 100vh;
            background-image: linear-gradient(180deg, #FFFFFF 0%, #FBF8FC 45%, #F7F2F9 100%);
        }

        .dark .lab-shell {
            background-image: linear-gradient(180deg, #1E1E2F 0%, #201934 55%, #141321 100%);
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(158, 75, 138, 0.15);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        .dark .glass {
            background: rgba(30, 41, 59, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .glass-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(243, 231, 242, 0.9));
            border: 1px solid rgba(158, 75, 138, 0.18);
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(30, 30, 47, 0.15);
        }

        .dark .glass-card {
            background: linear-gradient(145deg, rgba(30, 30, 47, 0.96), rgba(30, 30, 47, 0.86));
            border: 1px solid rgba(200, 141, 186, 0.25);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .glass-card:hover {
            border-color: rgba(158, 75, 138, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(158, 75, 138, 0.2);
        }

        .dark .glass-card:hover {
            border-color: rgba(200, 141, 186, 0.5);
            box-shadow: 0 12px 40px rgba(158, 75, 138, 0.3);
        }

        /* Pipeline Grid */
        .pipeline-grid {
            display: grid;
            grid-template-columns: 80px repeat(5, 1fr);
            gap: 8px;
        }

        .stage-box {
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: bold;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-sub);
            opacity: 0.3;
            transition: all 0.2s;
            border: 1px dashed var(--border);
            background: var(--bg-card);
        }

        .stage-active {
            opacity: 1;
            box-shadow: 0 0 15px rgba(158, 75, 138, 0.4);
            border: 1px solid rgba(158, 75, 138, 0.5);
            transform: scale(1.05);
            color: white;
        }

        /* Stage Colors */
        .bg-if {
            background-color: #9E4B8A;
        }

        .bg-id {
            background-color: #8B5CF6;
        }

        .bg-ex {
            background-color: #F59E0B;
        }

        .bg-mem {
            background-color: #10B981;
        }

        .bg-wb {
            background-color: #EC4899;
        }

        /* Card Flip Logic */
        .perspective-1000 {
            perspective: 1000px;
        }

        .flip-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-inner {
            transform: rotateY(180deg);
        }

        .flip-front,
        .flip-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 1rem;
        }

        .flip-back {
            transform: rotateY(180deg);
            background: var(--bg-card);
        }

        .code-line {
            counter-increment: line;
            padding-left: 1rem;
            border-left: 2px solid transparent;
        }

        .code-line:hover {
            background: rgba(158, 75, 138, 0.08);
            border-left-color: var(--primary);
        }

        .dark .code-line:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .code-line::before {
            content: counter(line);
            color: var(--text-sub);
            font-size: 0.75rem;
            margin-right: 1rem;
            display: inline-block;
            width: 1.5rem;
            text-align: right;
        }

        /* Section Cards */
        .section-card {
            border-radius: 1rem;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(243, 231, 242, 0.95));
            box-shadow: 0 18px 40px -18px rgba(30, 30, 47, 0.25);
            border: 1px solid rgba(158, 75, 138, 0.16);
            overflow: hidden;
        }

        .dark .section-card {
            background: linear-gradient(145deg, rgba(30, 30, 47, 0.96), rgba(30, 30, 47, 0.86));
            border-color: rgba(200, 141, 186, 0.25);
            box-shadow: 0 22px 60px -20px rgba(0, 0, 0, 0.6);
        }

        /* Timeline */
        .timeline-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--border);
            border: 4px solid var(--bg-app);
        }

        .timeline-dot.active {
            background: var(--primary);
            box-shadow: 0 0 12px rgba(158, 75, 138, 0.5);
        }

        /* Code Display */
        .code-display {
            background: rgba(30, 30, 47, 0.05);
            border-radius: 8px;
            padding: 1rem;
        }

        .dark .code-display {
            background: rgba(0, 0, 0, 0.3);
        }
    </style>

    <!-- Persist theme before paint -->
    <script>
            (function () {
                try {
                    const s = localStorage.getItem('px_theme');
                    const prefers = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    const useDark = s ? s === 'dark' : prefers;
                    if (useDark) document.documentElement.classList.add('dark');
                } catch (_) { }
            })();
    </script>
    <script src="../config.js"></script>
</head>

<body class="min-h-screen font-sans antialiased text-neutral-900 dark:text-white bg-hero-light dark:bg-hero-dark">

    <!-- ============== NAVBAR (Paper X) ============== -->
    <header
        class="sticky top-0 z-50 bg-white/80 dark:bg-brand-900/70 backdrop-blur supports-[backdrop-filter]:saturate-150 border-b border-black/5 dark:border-white/10">
        <div class="container flex items-center justify-between py-3.5">
            <a href="../index.html" class="flex items-center gap-3 shrink-0" aria-label="Paper X Home">
                <img src="../assets/img/logo-light.svg" class="h-9 w-auto dark:hidden" alt="Paper X" />
                <img src="../assets/img/logo-dark.svg" class="h-9 w-auto hidden dark:block" alt="Paper X" />
            </a>
            <nav class="hidden md:flex items-center gap-6 text-sm text-neutral-700 dark:text-white/85">
                <a href="../index.html" class="hover:text-brandlt-900 dark:hover:text-white">Home</a>
                <a href="../about.html" class="hover:text-brandlt-900 dark:hover:text-white">About</a>
                <a href="../academicas.html" class="hover:text-brandlt-900 dark:hover:text-white">Academics</a>
                <a href="../contact.html" class="hover:text-brandlt-900 dark:hover:text-white">Support</a>
            </nav>
            <div class="hidden md:flex items-center gap-2">
                <button data-theme-toggle
                    class="inline-flex items-center gap-2 rounded-full px-3 py-2 text-sm ring-1 ring-black/10 dark:ring-white/15 hover:bg-black/5 dark:hover:bg-white/5"
                    aria-label="Toggle theme">
                    <span class="material-symbols-rounded">dark_mode</span>
                    <span class="hidden lg:block">Theme</span>
                </button>
                <a href="../login.html"
                    class="px-3 py-2 text-sm text-neutral-700 dark:text-white/80 hover:text-brandlt-900 dark:hover:text-white rounded-full">Log
                    in</a>
                <a href="../signup.html"
                    class="inline-flex items-center justify-center rounded-full bg-brand-500 text-white text-sm font-semibold px-4 py-2.5 hover:shadow-glow transition">Sign
                    up</a>
            </div>
            <div class="md:hidden flex items-center gap-2">
                <button type="button" data-theme-toggle aria-label="Toggle theme"
                    class="inline-flex items-center justify-center size-10 rounded-full ring-1 ring-black/10 dark:ring-white/15 hover:bg-black/5 dark:hover:bg-white/5 transition">
                    <span class="material-symbols-rounded">dark_mode</span>
                </button>
            </div>
        </div>
    </header>

    <main class="lab-shell pb-16">

        <!-- Hero Section -->
        <section class="pt-12 pb-8">
            <div class="container max-w-5xl mx-auto px-4 text-center">
                <div
                    class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-brandlt-100 dark:bg-brand-700/30 border border-brandlt-300 dark:border-brand-500/30 text-brandlt-700 dark:text-brandlt-400 text-xs font-semibold uppercase tracking-widest mb-6">
                    <span class="material-symbols-rounded text-base">memory</span>
                    Computer Architecture 101
                </div>
                <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight text-brand-900 dark:text-white mb-4">
                    RISC
                </h1>
                <p
                    class="text-xl md:text-2xl font-light text-brandlt-700 dark:text-brandlt-300 max-w-2xl mx-auto leading-relaxed mb-4">
                    Reduced Instruction Set Computer
                </p>
                <p class="text-base text-brandlt-500 dark:text-brandlt-400 max-w-xl mx-auto">
                    The philosophy that changed computing forever: <span class="text-brand-500 font-semibold">Simplify
                        the hardware</span> to <span class="text-accent-500 font-semibold">speed up the
                        execution</span>.
                </p>

                <div class="mt-8 flex justify-center">
                    <button onclick="document.getElementById('sim-section').scrollIntoView({behavior: 'smooth'})"
                        class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-brand-500 text-white font-semibold shadow-glow hover:shadow-lg transition-all hover:scale-105">
                        <span class="material-symbols-rounded">play_arrow</span>
                        Jump to Simulator
                    </button>
                </div>
            </div>
        </section>

        <!-- RISC Philosophy Section -->
        <section class="py-12">
            <div class="container max-w-5xl mx-auto px-4">
                <div class="flex items-center gap-3 mb-8">
                    <div class="p-2 rounded-lg bg-brand-500/10 text-brand-500">
                        <i data-lucide="columns" class="w-6 h-6"></i>
                    </div>
                    <h2 class="text-2xl md:text-3xl font-bold text-brand-900 dark:text-white">The RISC Philosophy</h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">

                    <div class="flip-card perspective-1000 h-64 cursor-pointer group"
                        onclick="this.classList.toggle('flipped')">
                        <div class="flip-inner shadow-card">
                            <div
                                class="flip-front glass-card rounded-2xl p-6 flex flex-col items-center justify-center text-center">
                                <div
                                    class="p-4 bg-brand-500/15 rounded-full text-brand-500 mb-4 group-hover:scale-110 transition-transform">
                                    <i data-lucide="timer" class="w-8 h-8"></i>
                                </div>
                                <h3 class="font-bold text-lg text-brand-900 dark:text-white">Single Cycle Execution</h3>
                                <p class="text-xs text-brand-500 mt-2 uppercase tracking-wider">Click to reveal</p>
                            </div>
                            <div
                                class="flip-back glass-card rounded-2xl p-6 flex flex-col justify-center border-2 border-brand-500/50">
                                <div class="text-2xl font-black text-brand-500 mb-1">CPI ≈ 1</div>
                                <h3 class="font-bold text-brand-900 dark:text-white mb-2">Predictability</h3>
                                <p class="text-sm text-brandlt-600 dark:text-brandlt-400 leading-snug">Ideally, every
                                    instruction takes exactly one clock cycle. No complex logic waiting for multi-cycle
                                    tasks.</p>
                            </div>
                        </div>
                    </div>

                    <div class="flip-card perspective-1000 h-64 cursor-pointer group"
                        onclick="this.classList.toggle('flipped')">
                        <div class="flip-inner shadow-card">
                            <div
                                class="flip-front glass-card rounded-2xl p-6 flex flex-col items-center justify-center text-center">
                                <div
                                    class="p-4 bg-accent-500/15 rounded-full text-accent-500 mb-4 group-hover:scale-110 transition-transform">
                                    <i data-lucide="arrow-left-right" class="w-8 h-8"></i>
                                </div>
                                <h3 class="font-bold text-lg text-brand-900 dark:text-white">Load / Store Architecture
                                </h3>
                                <p class="text-xs text-accent-500 mt-2 uppercase tracking-wider">Click to reveal</p>
                            </div>
                            <div
                                class="flip-back glass-card rounded-2xl p-6 flex flex-col justify-center border-2 border-accent-500/50">
                                <div class="text-lg font-black text-accent-500 mb-1">Separation of Concerns</div>
                                <p class="text-sm text-brandlt-600 dark:text-brandlt-400 leading-snug">Only <code
                                        class="bg-brandlt-100 dark:bg-brand-900 px-1.5 py-0.5 rounded text-brand-700 dark:text-brandlt-300">LOAD</code>
                                    and <code
                                        class="bg-brandlt-100 dark:bg-brand-900 px-1.5 py-0.5 rounded text-brand-700 dark:text-brandlt-300">STORE</code>
                                    touch RAM. All math happens strictly in fast CPU registers.</p>
                            </div>
                        </div>
                    </div>

                    <div class="flip-card perspective-1000 h-64 cursor-pointer group"
                        onclick="this.classList.toggle('flipped')">
                        <div class="flip-inner shadow-card">
                            <div
                                class="flip-front glass-card rounded-2xl p-6 flex flex-col items-center justify-center text-center">
                                <div
                                    class="p-4 bg-purple-500/15 rounded-full text-purple-500 mb-4 group-hover:scale-110 transition-transform">
                                    <i data-lucide="ruler" class="w-8 h-8"></i>
                                </div>
                                <h3 class="font-bold text-lg text-brand-900 dark:text-white">Fixed Instruction Length
                                </h3>
                                <p class="text-xs text-purple-500 mt-2 uppercase tracking-wider">Click to reveal</p>
                            </div>
                            <div
                                class="flip-back glass-card rounded-2xl p-6 flex flex-col justify-center border-2 border-purple-500/50">
                                <div class="text-lg font-black text-purple-500 mb-1">Usually 32-bit</div>
                                <p class="text-sm text-brandlt-600 dark:text-brandlt-400 leading-snug">Every instruction
                                    is the same size. The CPU doesn't need to check "how long is this command?" before
                                    reading it.</p>
                            </div>
                        </div>
                    </div>

                    <div class="flip-card perspective-1000 h-64 cursor-pointer group"
                        onclick="this.classList.toggle('flipped')">
                        <div class="flip-inner shadow-card">
                            <div
                                class="flip-front glass-card rounded-2xl p-6 flex flex-col items-center justify-center text-center">
                                <div
                                    class="p-4 bg-pink-500/15 rounded-full text-pink-500 mb-4 group-hover:scale-110 transition-transform">
                                    <i data-lucide="layers" class="w-8 h-8"></i>
                                </div>
                                <h3 class="font-bold text-lg text-brand-900 dark:text-white">Heavy Pipelining</h3>
                                <p class="text-xs text-pink-500 mt-2 uppercase tracking-wider">Click to reveal</p>
                            </div>
                            <div
                                class="flip-back glass-card rounded-2xl p-6 flex flex-col justify-center border-2 border-pink-500/50">
                                <div class="text-lg font-black text-pink-500 mb-1">The Assembly Line</div>
                                <p class="text-sm text-brandlt-600 dark:text-brandlt-400 leading-snug">Because
                                    instructions are simple, we can overlap them. While one is fetching, the previous
                                    one is executing.</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <!-- Pipeline Simulator Section -->
        <section id="sim-section" class="py-12">
            <div class="container max-w-5xl mx-auto px-4">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-4 mb-6">
                    <div>
                        <div class="flex items-center gap-3 mb-2">
                            <div class="p-2 rounded-lg bg-accent-500/10 text-accent-500">
                                <i data-lucide="cpu" class="w-6 h-6"></i>
                            </div>
                            <h2 class="text-2xl md:text-3xl font-bold text-brand-900 dark:text-white">The Pipeline
                                Engine</h2>
                        </div>
                        <p class="text-brandlt-600 dark:text-brandlt-400 text-sm max-w-lg">
                            Visualize how RISC processes instructions. Click "Clock Tick" to step through time.
                            Notice how <strong class="text-brand-500">Pipelining</strong> fills every stage at once.
                        </p>
                    </div>

                    <div class="flex items-center gap-3">
                        <div class="glass px-4 py-2 rounded-full flex items-center gap-3">
                            <span
                                class="text-xs font-bold text-brandlt-600 dark:text-brandlt-400 uppercase">Mode:</span>
                            <button onclick="togglePipelineMode()" id="modeBtn"
                                class="text-xs font-bold px-3 py-1 rounded-full bg-brand-500 text-white shadow-lg transition-all">Pipelined</button>
                        </div>
                        <button onclick="resetSim()"
                            class="p-2.5 rounded-full bg-brandlt-100 dark:bg-brand-900 hover:bg-brandlt-200 dark:hover:bg-brand-700 text-brandlt-600 dark:text-brandlt-400 transition-colors"
                            title="Reset">
                            <i data-lucide="rotate-ccw" class="w-5 h-5"></i>
                        </button>
                        <button onclick="stepClock()"
                            class="px-6 py-2.5 bg-accent-500 hover:bg-accent-400 text-white rounded-full font-bold shadow-glow transition-all active:scale-95 flex items-center gap-2">
                            <i data-lucide="play" class="w-4 h-4 fill-current"></i> Clock Tick
                        </button>
                    </div>
                </div>

                <div class="section-card overflow-hidden">
                    <div
                        class="bg-brandlt-50 dark:bg-brand-900/50 border-b border-brandlt-200 dark:border-brand-700 p-4 flex justify-between items-center font-mono text-sm">
                        <div class="flex gap-8">
                            <div>
                                <span class="text-brandlt-500 dark:text-brandlt-400">CLOCK CYCLE:</span>
                                <span id="clock-display"
                                    class="text-brand-900 dark:text-white font-bold text-xl ml-2">0</span>
                            </div>
                            <div>
                                <span class="text-brandlt-500 dark:text-brandlt-400">FINISHED:</span>
                                <span id="finished-display" class="text-accent-500 font-bold text-xl ml-2">0</span>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <div class="px-2 py-0.5 rounded bg-if text-[10px] text-white font-bold">IF</div>
                            <div class="px-2 py-0.5 rounded bg-id text-[10px] text-white font-bold">ID</div>
                            <div class="px-2 py-0.5 rounded bg-ex text-[10px] text-white font-bold">EX</div>
                            <div class="px-2 py-0.5 rounded bg-mem text-[10px] text-white font-bold">MEM</div>
                            <div class="px-2 py-0.5 rounded bg-wb text-[10px] text-white font-bold">WB</div>
                        </div>
                    </div>

                    <div class="p-6 overflow-x-auto">
                        <div class="min-w-[600px]">
                            <div class="pipeline-grid mb-2 border-b border-brandlt-200 dark:border-brand-700 pb-2">
                                <div class="text-xs font-mono text-brandlt-500 dark:text-brandlt-400 pt-3">INSTR</div>
                                <div class="text-xs font-mono text-center text-brandlt-500 dark:text-brandlt-400">FETCH
                                </div>
                                <div class="text-xs font-mono text-center text-brandlt-500 dark:text-brandlt-400">DECODE
                                </div>
                                <div class="text-xs font-mono text-center text-brandlt-500 dark:text-brandlt-400">
                                    EXECUTE</div>
                                <div class="text-xs font-mono text-center text-brandlt-500 dark:text-brandlt-400">MEMORY
                                </div>
                                <div class="text-xs font-mono text-center text-brandlt-500 dark:text-brandlt-400">WRITE
                                </div>
                            </div>

                            <div id="instruction-rows" class="space-y-2">
                            </div>
                        </div>
                    </div>
                </div>

                <p id="sim-explainer" class="text-center mt-4 text-xs text-brandlt-500 dark:text-brandlt-400 font-mono">
                    * In Pipelined mode, a new instruction starts every cycle. <br>
                    * In Non-Pipelined, an instruction must finish WB before the next starts.
                </p>
            </div>
        </section>

        <!-- Code Showdown Section -->
        <section class="py-12">
            <div class="container max-w-5xl mx-auto px-4">
                <div class="flex items-center gap-3 mb-8">
                    <div class="p-2 rounded-lg bg-brand-500/10 text-brand-500">
                        <i data-lucide="code-2" class="w-6 h-6"></i>
                    </div>
                    <h2 class="text-2xl md:text-3xl font-bold text-brand-900 dark:text-white">The Code Showdown</h2>
                </div>

                <div class="grid md:grid-cols-2 gap-6">

                    <div class="section-card overflow-hidden border-l-4 border-pink-500">
                        <div
                            class="bg-pink-500/10 dark:bg-pink-500/20 p-4 border-b border-pink-500/20 flex justify-between items-center">
                            <h3 class="font-bold text-pink-600 dark:text-pink-400">CISC (x86 Style)</h3>
                            <span
                                class="text-xs bg-pink-500/15 text-pink-600 dark:text-pink-400 px-2 py-1 rounded-full font-semibold">Complex</span>
                        </div>
                        <div class="p-6">
                            <p class="mb-4 text-xs text-brandlt-500 dark:text-brandlt-400">Task: Multiply value at
                                Mem[A] by Mem[B]</p>
                            <div class="code-display font-mono text-sm text-brand-900 dark:text-brandlt-300">
                                <div class="code-line"><span class="text-pink-500">MULT</span> 2:3, 5:2</div>
                            </div>
                            <ul class="mt-6 space-y-3 text-sm">
                                <li class="flex gap-2 text-brandlt-600 dark:text-brandlt-400"><i data-lucide="x-circle"
                                        class="w-5 h-5 text-red-500 shrink-0"></i> <span>Hardware must be incredibly
                                        complex to decode this.</span></li>
                                <li class="flex gap-2 text-brandlt-600 dark:text-brandlt-400"><i data-lucide="x-circle"
                                        class="w-5 h-5 text-red-500 shrink-0"></i> <span>Takes variable cycles (hard to
                                        pipeline).</span></li>
                                <li class="flex gap-2 text-brandlt-600 dark:text-brandlt-400"><i
                                        data-lucide="check-circle" class="w-5 h-5 text-green-500 shrink-0"></i>
                                    <span>Code size is tiny.</span></li>
                            </ul>
                        </div>
                    </div>

                    <div class="section-card overflow-hidden border-l-4 border-brand-500">
                        <div
                            class="bg-brand-500/10 dark:bg-brand-500/20 p-4 border-b border-brand-500/20 flex justify-between items-center">
                            <h3 class="font-bold text-brand-600 dark:text-brand-400">RISC (MIPS/ARM Style)</h3>
                            <span
                                class="text-xs bg-brand-500/15 text-brand-600 dark:text-brand-400 px-2 py-1 rounded-full font-semibold">Reduced</span>
                        </div>
                        <div class="p-6">
                            <p class="mb-4 text-xs text-brandlt-500 dark:text-brandlt-400">Task: Multiply value at
                                Mem[A] by Mem[B]</p>
                            <div class="code-display font-mono text-sm text-brand-900 dark:text-brandlt-300">
                                <div class="code-line"><span class="text-brand-500">LOAD</span> R1, 2:3</div>
                                <div class="code-line"><span class="text-brand-500">LOAD</span> R2, 5:2</div>
                                <div class="code-line"><span class="text-yellow-500">PROD</span> R3, R1, R2</div>
                                <div class="code-line"><span class="text-accent-500">STORE</span> 2:3, R3</div>
                            </div>
                            <ul class="mt-6 space-y-3 text-sm">
                                <li class="flex gap-2 text-brandlt-600 dark:text-brandlt-400"><i
                                        data-lucide="check-circle" class="w-5 h-5 text-green-500 shrink-0"></i>
                                    <span>Hardware is simple & fast.</span></li>
                                <li class="flex gap-2 text-brandlt-600 dark:text-brandlt-400"><i
                                        data-lucide="check-circle" class="w-5 h-5 text-green-500 shrink-0"></i>
                                    <span>Easy to pipeline (1 cycle per line).</span></li>
                                <li class="flex gap-2 text-brandlt-600 dark:text-brandlt-400"><i
                                        data-lucide="alert-triangle" class="w-5 h-5 text-yellow-500 shrink-0"></i>
                                    <span>Compiler must work harder.</span></li>
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <!-- Evolution Timeline Section -->
        <section class="py-12">
            <div class="container max-w-5xl mx-auto px-4">
                <div class="flex items-center gap-3 mb-8">
                    <div class="p-2 rounded-lg bg-brand-500/10 text-brand-500">
                        <i data-lucide="history" class="w-6 h-6"></i>
                    </div>
                    <h2 class="text-2xl md:text-3xl font-bold text-brand-900 dark:text-white">Evolution</h2>
                </div>

                <div class="relative border-l-2 border-brandlt-200 dark:border-brand-700 ml-4 space-y-10">

                    <div class="relative pl-8">
                        <div class="absolute -left-[9px] top-0 timeline-dot"></div>
                        <div class="section-card p-6 hover:border-brand-500/50 transition-colors">
                            <span class="text-xs font-bold text-brand-500 mb-1 block">1975-1980</span>
                            <h3 class="text-xl font-bold text-brand-900 dark:text-white mb-2">The IBM 801 Project</h3>
                            <p class="text-brandlt-600 dark:text-brandlt-400 text-sm">John Cocke ("Father of RISC")
                                realizes that 20% of instructions do 80% of the work. They build a prototype using only
                                the simple 20%.</p>
                        </div>
                    </div>

                    <div class="relative pl-8">
                        <div class="absolute -left-[9px] top-0 timeline-dot"></div>
                        <div class="section-card p-6 hover:border-brand-500/50 transition-colors">
                            <span class="text-xs font-bold text-brand-500 mb-1 block">1980-1984</span>
                            <h3 class="text-xl font-bold text-brand-900 dark:text-white mb-2">Berkeley & Stanford</h3>
                            <p class="text-brandlt-600 dark:text-brandlt-400 text-sm">Academic validation. David
                                Patterson (Berkeley) coins "RISC". John Hennessy (Stanford) creates MIPS, focusing on
                                efficient pipelining.</p>
                        </div>
                    </div>

                    <div class="relative pl-8">
                        <div class="absolute -left-[9px] top-0 timeline-dot active"></div>
                        <div class="section-card p-6 border-2 border-brand-500/40 bg-brand-500/5">
                            <span class="text-xs font-bold text-brand-500 mb-1 block">1985-Present</span>
                            <h3 class="text-xl font-bold text-brand-900 dark:text-white mb-2">The Rise of ARM</h3>
                            <p class="text-brandlt-600 dark:text-brandlt-400 text-sm">Acorn RISC Machine (ARM) proves
                                RISC is power-efficient. Today, it powers almost every smartphone on Earth.</p>
                        </div>
                    </div>

                    <div class="relative pl-8">
                        <div class="absolute -left-[9px] top-0 timeline-dot" style="background: #10B981;"></div>
                        <div class="section-card p-6 hover:border-accent-500/50 transition-colors">
                            <span class="text-xs font-bold text-accent-500 mb-1 block">Future</span>
                            <h3 class="text-xl font-bold text-brand-900 dark:text-white mb-2">RISC-V: The Open Era</h3>
                            <p class="text-brandlt-600 dark:text-brandlt-400 text-sm">An open-source RISC architecture.
                                It allows anyone to design chips without royalties. It is revolutionizing IoT and custom
                                silicon.</p>
                        </div>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <footer class="border-t border-brandlt-200 dark:border-brand-700 bg-brandlt-50 dark:bg-brand-900 py-12 text-center">
        <p class="text-brandlt-500 dark:text-brandlt-400 text-sm">Designed for Clarity. RISC Architecture Deep Dive.</p>
        <p class="text-brandlt-400 dark:text-brandlt-500 text-xs mt-2">© Paper X — All rights reserved.</p>
    </footer>

    <script>
        // Init Icons
        lucide.createIcons();

        // SIMULATION LOGIC
        const TOTAL_STAGES = 5; // IF, ID, EX, MEM, WB
        const INSTRUCTIONS_COUNT = 7; // How many rows to show
        let clock = 0;
        let isPipelined = true;
        let finishedCount = 0;

        // Render the grid initially
        const container = document.getElementById('instruction-rows');

        function initGrid() {
            container.innerHTML = '';
            for (let i = 1; i <= INSTRUCTIONS_COUNT; i++) {
                const row = document.createElement('div');
                row.className = 'pipeline-grid items-center';

                // Label
                const label = document.createElement('div');
                label.className = 'text-xs font-mono font-bold text-brandlt-500 dark:text-brandlt-400';
                label.innerText = `Inst ${i}`;
                row.appendChild(label);

                // 5 Stage slots
                for (let s = 0; s < TOTAL_STAGES; s++) {
                    const slot = document.createElement('div');
                    slot.className = 'stage-box';
                    slot.id = `inst-${i}-stage-${s}`; // e.g., inst-1-stage-0

                    // Set label text
                    const stageNames = ['IF', 'ID', 'EX', 'MEM', 'WB'];
                    slot.innerText = stageNames[s];

                    row.appendChild(slot);
                }
                container.appendChild(row);
            }
        }

        function togglePipelineMode() {
            isPipelined = !isPipelined;
            const btn = document.getElementById('modeBtn');
            const explainer = document.getElementById('sim-explainer');

            if (isPipelined) {
                btn.innerText = "Pipelined";
                btn.classList.remove('bg-brandlt-400', 'dark:bg-brand-700');
                btn.classList.add('bg-brand-500');
            } else {
                btn.innerText = "Non-Pipelined";
                btn.classList.remove('bg-brand-500');
                btn.classList.add('bg-brandlt-400', 'dark:bg-brand-700');
            }
            resetSim();
        }

        function resetSim() {
            clock = 0;
            finishedCount = 0;
            document.getElementById('clock-display').innerText = clock;
            document.getElementById('finished-display').innerText = finishedCount;
            initGrid();
        }

        function stepClock() {
            clock++;
            document.getElementById('clock-display').innerText = clock;

            // Clear current highlights (simple redraw approach for clarity)
            document.querySelectorAll('.stage-active').forEach(el => {
                el.classList.remove('stage-active', 'bg-if', 'bg-id', 'bg-ex', 'bg-mem', 'bg-wb', 'text-white');
                el.style.opacity = '0.3';
            });

            // Calculate state for each instruction
            for (let i = 1; i <= INSTRUCTIONS_COUNT; i++) {
                let stageIndex = -1;

                if (isPipelined) {
                    // Formula: Stage = Clock - InstructionNumber
                    // Example: Clock 1, Inst 1 => Stage 0 (IF)
                    // Example: Clock 2, Inst 1 => Stage 1 (ID), Inst 2 => Stage 0 (IF)
                    stageIndex = (clock - 1) - (i - 1);
                } else {
                    // Non-Pipelined (Serial)
                    // Inst 1 occupies clocks 1-5
                    // Inst 2 occupies clocks 6-10
                    const startClock = (i - 1) * 5 + 1;
                    const endClock = startClock + 4;

                    if (clock >= startClock && clock <= endClock) {
                        stageIndex = clock - startClock;
                    } else if (clock > endClock) {
                        stageIndex = 5; // Finished
                    }
                }

                // Render Active Stage
                if (stageIndex >= 0 && stageIndex < 5) {
                    const slot = document.getElementById(`inst-${i}-stage-${stageIndex}`);
                    if (slot) {
                        slot.classList.add('stage-active');
                        slot.style.opacity = '1';
                        // Add specific color class
                        const colors = ['bg-if', 'bg-id', 'bg-ex', 'bg-mem', 'bg-wb'];
                        slot.classList.add(colors[stageIndex]);
                    }
                }

                // Count finished
                if (stageIndex >= 5) {
                    // Mark last block as done or dim row
                    document.getElementById(`inst-${i}-stage-4`).classList.add('text-green-500', 'border-green-500');
                }
            }

            // Update finished counter
            if (isPipelined) {
                // Inst N finishes at Clock N + 4
                finishedCount = Math.max(0, clock - 4);
                if (finishedCount > INSTRUCTIONS_COUNT) finishedCount = INSTRUCTIONS_COUNT;
            } else {
                finishedCount = Math.floor((clock - 1) / 5);
                if (finishedCount > INSTRUCTIONS_COUNT) finishedCount = INSTRUCTIONS_COUNT;
            }
            document.getElementById('finished-display').innerText = finishedCount;
        }

        // Boot
        initGrid();

        // Shared Paper X theme toggle wiring
        const themeToggles = document.querySelectorAll('[data-theme-toggle]');
        const root = document.documentElement;

        themeToggles.forEach(btn => {
            btn.addEventListener('click', () => {
                const isDark = root.classList.toggle('dark');
                try { localStorage.setItem('px_theme', isDark ? 'dark' : 'light'); } catch (_) { }
            });
        });

    </script>
</body>

</html>