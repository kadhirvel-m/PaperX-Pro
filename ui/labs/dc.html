<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DC Motor & Generator Lab â€” Paper X</title>
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,600,0,0"
        rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/tailwind.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                container: { center: true, padding: '1rem' },
                extend: {
                    fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui', 'sans-serif'] },
                    colors: {
                        brand: { 900: '#1E1E2F', 700: '#4C2A59', 500: '#9E4B8A' },
                        brandlt: { 50: '#FAF5FB', 100: '#F3E7F2', 200: '#E7D0E4', 300: '#D9B4D3', 400: '#C88DBA', 500: '#9E4B8A', 700: '#4C2A59', 900: '#1E1E2F' }
                    },
                    boxShadow: { glow: '0 8px 30px rgba(158,75,138,0.35)' }
                }
            }
        }
    </script>
    <style>
        :root {
            --bg-app: #F7F2F9;
            --bg-card: #FFFFFF;
            --text-head: #1E1E2F;
            --text-body: #2F2F3A;
            --text-sub: #5A5A6B;
            --border: #E5DFEC;
            --accent: #9E4B8A;
        }

        .dark {
            --bg-app: #1E1E2F;
            --bg-card: #201934;
            --text-head: #F3E7F2;
            --text-body: #E8E3EE;
            --text-sub: #C9BED5;
            --border: #3A3247;
            --accent: #C88DBA;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
        }

        .lab-shell {
            min-height: 100vh;
            background: linear-gradient(180deg, #FFFFFF 0%, #FBF8FC 45%, #F7F2F9 100%);
        }

        .dark .lab-shell {
            background: linear-gradient(180deg, #1E1E2F 0%, #201934 55%, #141321 100%);
        }

        .glass-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(243, 231, 242, 0.9));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(158, 75, 138, 0.15);
            border-radius: 1.5rem;
            box-shadow: 0 20px 50px -15px rgba(30, 30, 47, 0.25);
        }

        .dark .glass-card {
            background: linear-gradient(145deg, rgba(32, 25, 52, 0.95), rgba(30, 30, 47, 0.9));
            border-color: rgba(200, 141, 186, 0.25);
            box-shadow: 0 25px 60px -15px rgba(0, 0, 0, 0.6);
        }

        .mode-tabs {
            display: flex;
            gap: 0.5rem;
            background: var(--bg-app);
            padding: 0.5rem;
            border-radius: 1rem;
        }

        .mode-tab {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            color: var(--text-sub);
            border: none;
            background: transparent;
        }

        .mode-tab.active {
            background: linear-gradient(135deg, #9E4B8A, #B06AB3);
            color: white;
            box-shadow: 0 8px 25px rgba(158, 75, 138, 0.4);
        }

        .mode-tab:hover:not(.active) {
            background: rgba(158, 75, 138, 0.1);
            color: var(--text-head);
        }

        .param-group {
            margin-bottom: 1rem;
        }

        .param-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.4rem;
            font-size: 0.8rem;
            color: var(--text-body);
        }

        .param-value {
            font-weight: 700;
            color: var(--accent);
            font-size: 0.9rem;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            background: var(--border);
            border-radius: 3px;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: linear-gradient(135deg, #9E4B8A, #B06AB3);
            border-radius: 50%;
            cursor: grab;
            box-shadow: 0 3px 10px rgba(158, 75, 138, 0.5);
            border: 2px solid white;
        }

        .dark input[type="range"]::-webkit-slider-thumb {
            border-color: var(--bg-card);
        }

        /* 3D Scene */
        .scene-3d {
            perspective: 1200px;
            width: 100%;
            height: 450px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .scene-3d:active {
            cursor: grabbing;
        }

        .motor-3d {
            transform-style: preserve-3d;
            position: relative;
            width: 300px;
            height: 200px;
        }

        .motor-housing {
            position: absolute;
            width: 180px;
            height: 180px;
            left: 60px;
            top: 10px;
            transform-style: preserve-3d;
        }

        .housing-face {
            position: absolute;
            width: 180px;
            height: 180px;
            backface-visibility: visible;
            border: 3px solid #4C2A59;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .housing-front {
            background: linear-gradient(145deg, #E7D0E4, #D9B4D3);
            transform: translateZ(60px);
            border-radius: 50%;
        }

        .housing-back {
            background: linear-gradient(145deg, #D9B4D3, #C88DBA);
            transform: translateZ(-60px) rotateY(180deg);
            border-radius: 50%;
        }

        .dark .housing-front,
        .dark .housing-back {
            background: linear-gradient(145deg, #3A3247, #2A2540);
            border-color: #C88DBA;
        }

        .housing-side {
            width: 120px;
            height: 180px;
            background: linear-gradient(90deg, #4C2A59, #9E4B8A, #4C2A59);
            position: absolute;
            left: 30px;
            transform: rotateY(90deg);
            border-radius: 0;
            border: none;
        }

        .rotor-3d {
            position: absolute;
            width: 120px;
            height: 120px;
            left: 90px;
            top: 40px;
            transform-style: preserve-3d;
        }

        .rotor-face {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
        }

        .rotor-front {
            background: linear-gradient(135deg, #9E4B8A, #B06AB3);
            transform: translateZ(70px);
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rotor-back {
            background: linear-gradient(135deg, #B06AB3, #9E4B8A);
            transform: translateZ(-70px);
        }

        .rotor-shaft-3d {
            width: 30px;
            height: 30px;
            background: #4C2A59;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .dark .rotor-shaft-3d {
            background: #1E1E2F;
        }

        .armature-3d {
            position: absolute;
            width: 100%;
            height: 20px;
            background: linear-gradient(90deg, #FFD700, #FFA500, #FFD700);
            border-radius: 10px;
            top: 50%;
            transform: translateY(-50%);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
        }

        .brush-3d {
            position: absolute;
            width: 20px;
            height: 50px;
            background: linear-gradient(180deg, #333, #555, #333);
            border-radius: 4px;
        }

        .brush-left {
            left: 20px;
            top: 75px;
        }

        .brush-right {
            right: 20px;
            top: 75px;
        }

        .field-pole-3d {
            position: absolute;
            width: 40px;
            height: 100px;
            background: linear-gradient(180deg, #C0C0C0, #808080, #C0C0C0);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--text-head);
        }

        .pole-north {
            left: -30px;
            top: 50px;
        }

        .pole-south {
            right: -30px;
            top: 50px;
        }

        .dark .field-pole-3d {
            color: white;
        }

        /* Battery */
        .battery-3d {
            position: absolute;
            left: -120px;
            top: 50%;
            transform: translateY(-50%) translateZ(20px);
        }

        .battery-body {
            width: 80px;
            height: 45px;
            background: linear-gradient(180deg, #2a2a2a, #1a1a1a);
            border-radius: 6px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #444;
        }

        .battery-label {
            color: #FFD700;
            font-weight: 800;
            font-size: 0.9rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .battery-terminal {
            position: absolute;
            width: 12px;
            height: 20px;
            background: #C0C0C0;
            border-radius: 2px;
        }

        .terminal-pos {
            right: -8px;
            top: 8px;
        }

        .terminal-pos::after {
            content: '+';
            position: absolute;
            right: 15px;
            top: 0;
            color: #ff4444;
            font-weight: 800;
            font-size: 1.2rem;
        }

        .terminal-neg {
            right: -8px;
            bottom: 8px;
        }

        .terminal-neg::after {
            content: 'âˆ’';
            position: absolute;
            right: 15px;
            top: -2px;
            color: #4444ff;
            font-weight: 800;
            font-size: 1.2rem;
        }

        .battery-glow {
            position: absolute;
            inset: -5px;
            border-radius: 10px;
            background: rgba(255, 215, 0, 0.2);
            filter: blur(10px);
            animation: batteryPulse 2s ease-in-out infinite;
        }

        @keyframes batteryPulse {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 0.8;
            }
        }

        .wire {
            position: absolute;
            height: 4px;
            background: linear-gradient(90deg, #ff4444, #cc0000);
            border-radius: 2px;
            box-shadow: 0 0 8px rgba(255, 0, 0, 0.5);
        }

        .wire-pos {
            width: 50px;
            left: -40px;
            top: calc(50% - 15px);
        }

        .wire-neg {
            width: 50px;
            left: -40px;
            top: calc(50% + 15px);
            background: linear-gradient(90deg, #4444ff, #0000cc);
            box-shadow: 0 0 8px rgba(0, 0, 255, 0.5);
        }

        /* Bulb */
        .bulb-3d {
            position: absolute;
            right: -130px;
            top: 50%;
            transform: translateY(-50%) translateZ(20px);
            display: none;
        }

        .bulb-glass {
            width: 60px;
            height: 80px;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.9), rgba(200, 200, 200, 0.4));
            border-radius: 50% 50% 20% 20%;
            position: relative;
            transition: all 0.3s;
        }

        .bulb-glass.on {
            background: radial-gradient(circle at 30% 30%, #FFFACD, #FFD700);
            box-shadow: 0 0 40px #FFD700, 0 0 80px rgba(255, 215, 0, 0.5);
        }

        .bulb-filament {
            position: absolute;
            width: 20px;
            height: 30px;
            left: 50%;
            top: 40%;
            transform: translateX(-50%);
            border: 3px solid #888;
            border-radius: 50%;
            background: transparent;
            transition: all 0.3s;
        }

        .bulb-glass.on .bulb-filament {
            border-color: #FF8C00;
            box-shadow: 0 0 15px #FFD700;
        }

        .bulb-base {
            width: 30px;
            height: 25px;
            background: linear-gradient(180deg, #666, #333);
            margin: -5px auto 0;
            border-radius: 0 0 8px 8px;
        }

        .bulb-label {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
            font-size: 0.8rem;
            color: var(--text-sub);
        }

        /* Gauges */
        .gauge-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
        }

        .gauge-card {
            background: var(--bg-app);
            border-radius: 0.6rem;
            padding: 0.5rem 0.4rem;
            text-align: center;
            border: 1px solid var(--border);
        }

        .gauge-icon {
            font-size: 1rem;
            margin-bottom: 0.15rem;
            color: var(--accent);
        }

        .gauge-icon .material-symbols-rounded {
            font-size: 1.1rem;
        }

        .gauge-value {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--text-head);
            line-height: 1.1;
        }

        .gauge-unit {
            font-size: 0.6rem;
            color: var(--text-sub);
        }

        .gauge-label {
            font-size: 0.55rem;
            color: var(--text-sub);
            text-transform: uppercase;
            letter-spacing: 0.02em;
        }


        /* Theory */
        .theory-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .theory-tab {
            padding: 0.6rem 1.25rem;
            font-weight: 600;
            color: var(--text-sub);
            cursor: pointer;
            border-radius: 2rem;
            transition: all 0.3s;
            background: var(--bg-app);
            border: 1px solid var(--border);
            font-size: 0.9rem;
        }

        .theory-tab.active {
            background: linear-gradient(135deg, #9E4B8A, #B06AB3);
            color: white;
            border-color: transparent;
        }

        .theory-content {
            display: none;
            animation: fadeIn 0.4s;
        }

        .theory-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .equation-box {
            background: linear-gradient(135deg, rgba(158, 75, 138, 0.1), rgba(76, 42, 89, 0.05));
            border: 1px solid rgba(158, 75, 138, 0.2);
            border-radius: 1rem;
            padding: 1rem;
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            text-align: center;
            color: var(--text-head);
        }

        .equation-box .eq-title {
            font-family: 'Inter', sans-serif;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-sub);
            margin-bottom: 0.3rem;
            font-weight: 600;
        }

        .drag-hint {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 0.8rem;
            background: var(--bg-card);
            border-radius: 2rem;
            border: 1px solid var(--border);
            font-size: 0.75rem;
            color: var(--text-sub);
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr !important;
            }
        }

        @media (max-width: 640px) {
            .gauge-grid {
                grid-template-columns: 1fr;
            }

            .scene-3d {
                height: 350px;
            }
        }
    </style>
    <script>
            (function () {
                try {
                    const s = localStorage.getItem('px_theme');
                    const prefers = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    if (s ? s === 'dark' : prefers) document.documentElement.classList.add('dark');
                } catch (_) { }
            })();
    </script>
</head>

<body class="min-h-screen font-sans antialiased text-neutral-900 dark:text-white">
    <!-- Navbar -->
    <header
        class="sticky top-0 z-50 bg-white/80 dark:bg-brand-900/70 backdrop-blur border-b border-black/5 dark:border-white/10">
        <div class="container flex items-center justify-between py-3">
            <a href="../index.html" class="flex items-center gap-3 shrink-0">
                <img src="../assets/img/logo-light.svg" class="h-9 w-auto dark:hidden" alt="Paper X" />
                <img src="../assets/img/logo-dark.svg" class="h-9 w-auto hidden dark:block" alt="Paper X" />
            </a>
            <nav class="hidden md:flex items-center gap-6 text-sm text-neutral-700 dark:text-white/85">
                <a href="../index.html" class="hover:text-brand-500">Home</a>
                <a href="../academicas.html" class="hover:text-brand-500">Academics</a>
            </nav>
            <button id="themeToggle"
                class="inline-flex items-center gap-2 rounded-full px-3 py-2 text-sm ring-1 ring-black/10 dark:ring-white/15 hover:bg-black/5 dark:hover:bg-white/5">
                <span class="material-symbols-rounded">dark_mode</span>
                <span class="hidden lg:block">Theme</span>
            </button>
        </div>
    </header>

    <main class="lab-shell pb-12">
        <!-- Hero -->
        <section class="pt-6 pb-4">
            <div class="container max-w-7xl mx-auto px-4 text-center">
                <h1 class="text-2xl md:text-3xl font-bold tracking-tight mb-2" style="color: var(--text-head);">
                    <span class="material-symbols-rounded text-3xl align-middle mr-2"
                        style="color: var(--accent);">electric_bolt</span>
                    DC Motor & Generator Simulator
                </h1>
                <div class="max-w-sm mx-auto mt-4">
                    <div class="mode-tabs">
                        <button class="mode-tab active" data-mode="motor">
                            <span class="material-symbols-rounded align-middle mr-1">battery_charging_full</span> Motor
                        </button>
                        <button class="mode-tab" data-mode="generator">
                            <span class="material-symbols-rounded align-middle mr-1">lightbulb</span> Generator
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Grid: 3D Motor (Left) + Controls & Output (Right) -->
        <section>
            <div class="container max-w-7xl mx-auto px-4">
                <div class="main-grid" style="display: grid; grid-template-columns: 1fr 360px; gap: 1.5rem;">

                    <!-- Left: 3D Motor Visualization -->
                    <div class="glass-card p-5">
                        <div class="flex items-center justify-between mb-2">
                            <h2 class="text-lg font-bold" style="color: var(--text-head);" id="vizTitle">3D DC Motor
                            </h2>
                            <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold"
                                style="background: rgba(158,75,138,0.15); color: var(--accent);" id="statusBadge">
                                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> Running
                            </span>
                        </div>

                        <div class="scene-3d" id="scene3d">
                            <div class="motor-3d" id="motor3d">
                                <!-- Battery -->
                                <div class="battery-3d" id="battery">
                                    <div class="battery-glow"></div>
                                    <div class="battery-body">
                                        <span class="battery-label" id="batteryLabel">120V</span>
                                        <div class="battery-terminal terminal-pos"></div>
                                        <div class="battery-terminal terminal-neg"></div>
                                    </div>
                                    <div class="wire wire-pos"></div>
                                    <div class="wire wire-neg"></div>
                                </div>

                                <!-- Bulb -->
                                <div class="bulb-3d" id="bulb">
                                    <div class="bulb-glass" id="bulbGlass">
                                        <div class="bulb-filament"></div>
                                    </div>
                                    <div class="bulb-base"></div>
                                    <div class="bulb-label" id="bulbLabel">0W</div>
                                </div>

                                <div class="field-pole-3d pole-north">N</div>
                                <div class="field-pole-3d pole-south">S</div>
                                <div class="brush-3d brush-left"></div>
                                <div class="brush-3d brush-right"></div>

                                <div class="motor-housing">
                                    <div class="housing-face housing-front"></div>
                                    <div class="housing-face housing-back"></div>
                                    <div class="housing-face housing-side"></div>
                                </div>

                                <div class="rotor-3d" id="rotor3d">
                                    <div class="rotor-face rotor-front">
                                        <div class="armature-3d" id="armature3d"></div>
                                        <div class="rotor-shaft-3d"></div>
                                    </div>
                                    <div class="rotor-face rotor-back"></div>
                                </div>
                            </div>
                            <div class="drag-hint">
                                <span class="material-symbols-rounded">3d_rotation</span>
                                Drag to rotate
                            </div>
                        </div>

                        <div style="display: flex; justify-content: center; gap: 1rem; margin-top: 0.75rem;">
                            <div
                                style="display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 1rem; background: var(--bg-app); border-radius: 2rem; border: 1px solid var(--border);">
                                <span class="material-symbols-rounded" style="color: var(--accent);">rotate_right</span>
                                <span style="font-size: 0.85rem; font-weight: 600; color: var(--text-body);"
                                    id="rotationText">1350 RPM</span>
                            </div>
                            <div
                                style="display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 1rem; background: var(--bg-app); border-radius: 2rem; border: 1px solid var(--border);">
                                <span class="material-symbols-rounded" style="color: var(--accent);">bolt</span>
                                <span style="font-size: 0.85rem; font-weight: 600; color: var(--text-body);"
                                    id="powerText">2.88 kW</span>
                            </div>
                        </div>
                    </div>

                    <!-- Right: Controls + Live Output -->
                    <div class="space-y-4">
                        <!-- Control Parameters -->
                        <div class="glass-card p-5">
                            <h3 class="text-base font-bold mb-3" style="color: var(--text-head);">
                                <span class="material-symbols-rounded align-middle mr-1"
                                    style="color: var(--accent);">tune</span>
                                Control Parameters
                            </h3>

                            <div id="motorControls">
                                <div class="param-group">
                                    <div class="param-label">
                                        <span>Supply Voltage (V<sub>s</sub>)</span>
                                        <span class="param-value" id="voltageValue">120 V</span>
                                    </div>
                                    <input type="range" id="voltageSlider" min="0" max="240" value="120">
                                </div>
                                <div class="param-group">
                                    <div class="param-label">
                                        <span>Field Strength (Î¦)</span>
                                        <span class="param-value" id="fieldValue">100 %</span>
                                    </div>
                                    <input type="range" id="fieldSlider" min="10" max="100" value="100">
                                </div>
                                <div class="param-group">
                                    <div class="param-label">
                                        <span>Armature Resistance (R<sub>a</sub>)</span>
                                        <span class="param-value" id="resistanceValue">0.5 Î©</span>
                                    </div>
                                    <input type="range" id="resistanceSlider" min="0.1" max="5" value="0.5" step="0.1">
                                </div>
                                <div class="param-group">
                                    <div class="param-label">
                                        <span>Load Torque (T<sub>L</sub>)</span>
                                        <span class="param-value" id="loadValue">50 %</span>
                                    </div>
                                    <input type="range" id="loadSlider" min="0" max="100" value="50">
                                </div>
                            </div>

                            <div id="generatorControls" style="display: none;">
                                <div class="param-group">
                                    <div class="param-label">
                                        <span>Prime Mover Speed</span>
                                        <span class="param-value" id="speedInputValue">1500 RPM</span>
                                    </div>
                                    <input type="range" id="speedInputSlider" min="100" max="3000" value="1500"
                                        step="50">
                                </div>
                                <div class="param-group">
                                    <div class="param-label">
                                        <span>Field Excitation (I<sub>f</sub>)</span>
                                        <span class="param-value" id="excitationValue">100 %</span>
                                    </div>
                                    <input type="range" id="excitationSlider" min="10" max="100" value="100">
                                </div>
                                <div class="param-group">
                                    <div class="param-label">
                                        <span>Load Resistance (R<sub>L</sub>)</span>
                                        <span class="param-value" id="loadResValue">10 Î©</span>
                                    </div>
                                    <input type="range" id="loadResSlider" min="1" max="100" value="10">
                                </div>
                            </div>

                            <div class="flex gap-2 mt-4">
                                <button id="resetBtn" class="flex-1 py-2 px-3 rounded-lg font-semibold text-sm"
                                    style="background: var(--bg-app); color: var(--text-body); border: 1px solid var(--border);">
                                    <span class="material-symbols-rounded align-middle mr-1"
                                        style="font-size: 1rem;">restart_alt</span> Reset
                                </button>
                                <button id="pauseBtn"
                                    class="flex-1 py-2 px-3 rounded-lg font-semibold text-sm text-white"
                                    style="background: linear-gradient(135deg, #9E4B8A, #B06AB3);">
                                    <span class="material-symbols-rounded align-middle mr-1" style="font-size: 1rem;"
                                        id="pauseIcon">pause</span>
                                    <span id="pauseText">Pause</span>
                                </button>
                            </div>
                        </div>

                        <!-- Live Output -->
                        <div class="glass-card p-5">
                            <h3 class="text-base font-bold mb-3" style="color: var(--text-head);">
                                <span class="material-symbols-rounded align-middle mr-1"
                                    style="color: var(--accent);">monitoring</span>
                                Live Output
                            </h3>

                            <div class="gauge-grid" id="motorGauges">
                                <div class="gauge-card">
                                    <div class="gauge-icon"><span class="material-symbols-rounded">bolt</span></div>
                                    <div class="gauge-value" id="emfOutput">108</div>
                                    <div class="gauge-unit">Volts</div>
                                    <div class="gauge-label">Back EMF</div>
                                </div>
                                <div class="gauge-card">
                                    <div class="gauge-icon"><span class="material-symbols-rounded">speed</span></div>
                                    <div class="gauge-value" id="speedOutput">1350</div>
                                    <div class="gauge-unit">RPM</div>
                                    <div class="gauge-label">Speed</div>
                                </div>
                                <div class="gauge-card">
                                    <div class="gauge-icon"><span class="material-symbols-rounded">settings</span></div>
                                    <div class="gauge-value" id="torqueOutput">28.5</div>
                                    <div class="gauge-unit">NÂ·m</div>
                                    <div class="gauge-label">Torque</div>
                                </div>
                                <div class="gauge-card">
                                    <div class="gauge-icon"><span class="material-symbols-rounded">electric_meter</span>
                                    </div>
                                    <div class="gauge-value" id="currentOutput">24</div>
                                    <div class="gauge-unit">Amps</div>
                                    <div class="gauge-label">Current</div>
                                </div>
                            </div>

                            <div class="gauge-grid" id="generatorGauges" style="display: none;">
                                <div class="gauge-card">
                                    <div class="gauge-icon"><span class="material-symbols-rounded">bolt</span></div>
                                    <div class="gauge-value" id="genVoltageOutput">220</div>
                                    <div class="gauge-unit">Volts</div>
                                    <div class="gauge-label">EMF</div>
                                </div>
                                <div class="gauge-card">
                                    <div class="gauge-icon"><span class="material-symbols-rounded">electric_meter</span>
                                    </div>
                                    <div class="gauge-value" id="genCurrentOutput">22</div>
                                    <div class="gauge-unit">Amps</div>
                                    <div class="gauge-label">Current</div>
                                </div>
                                <div class="gauge-card">
                                    <div class="gauge-icon"><span class="material-symbols-rounded">bar_chart</span>
                                    </div>
                                    <div class="gauge-value" id="genPowerOutput">4.84</div>
                                    <div class="gauge-unit">kW</div>
                                    <div class="gauge-label">Power</div>
                                </div>
                                <div class="gauge-card">
                                    <div class="gauge-icon"><span class="material-symbols-rounded">lightbulb</span>
                                    </div>
                                    <div class="gauge-value" id="bulbPower">484</div>
                                    <div class="gauge-unit">Watts</div>
                                    <div class="gauge-label">Bulb Load</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Full Width Theory Section -->
        <section class="mt-6">
            <div class="container max-w-7xl mx-auto px-4">
                <div class="glass-card p-6">
                    <div class="theory-tabs">
                        <button class="theory-tab active" data-tab="principle">
                            <span class="material-symbols-rounded align-middle mr-1"
                                style="font-size: 1rem;">science</span> Principle
                        </button>
                        <button class="theory-tab" data-tab="equations">
                            <span class="material-symbols-rounded align-middle mr-1"
                                style="font-size: 1rem;">calculate</span> Equations
                        </button>
                        <button class="theory-tab" data-tab="types">
                            <span class="material-symbols-rounded align-middle mr-1"
                                style="font-size: 1rem;">category</span> Types
                        </button>
                    </div>

                    <div id="tab-principle" class="theory-content active">
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                            <div>
                                <h4 class="font-bold mb-3 text-lg" style="color: var(--text-head);">
                                    <span class="material-symbols-rounded align-middle mr-2"
                                        style="color: var(--accent);">battery_charging_full</span>
                                    DC Motor Principle
                                </h4>
                                <p style="color: var(--text-body); line-height: 1.8;">
                                    When current from a <strong>battery</strong> flows through a conductor
                                    placed in a magnetic field, a <strong>Lorentz force</strong> is exerted on the
                                    conductor. This force causes the armature to rotate, converting electrical energy
                                    into mechanical energy.
                                </p>
                                <div class="equation-box" style="margin-top: 1rem;">
                                    <div class="eq-title">Lorentz Force</div>
                                    F = BIL sin(Î¸)
                                </div>
                            </div>
                            <div>
                                <h4 class="font-bold mb-3 text-lg" style="color: var(--text-head);">
                                    <span class="material-symbols-rounded align-middle mr-2"
                                        style="color: var(--accent);">lightbulb</span>
                                    DC Generator Principle
                                </h4>
                                <p style="color: var(--text-body); line-height: 1.8;">
                                    When a conductor rotates in a magnetic field, an <strong>EMF is induced</strong>
                                    (Faraday's Law). This generated voltage powers the connected <strong>load
                                        (bulb)</strong>, converting mechanical energy into electrical energy.
                                </p>
                                <div class="equation-box" style="margin-top: 1rem;">
                                    <div class="eq-title">Faraday's Law</div>
                                    E = âˆ’dÎ¦/dt = BLv
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="tab-equations" class="theory-content">
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div class="equation-box">
                                <div class="eq-title">Back EMF (Motor)</div>
                                E<sub>b</sub> = V - I<sub>a</sub>R<sub>a</sub>
                            </div>
                            <div class="equation-box">
                                <div class="eq-title">Torque</div>
                                T = KÎ¦I<sub>a</sub>
                            </div>
                            <div class="equation-box">
                                <div class="eq-title">Speed</div>
                                N = E<sub>b</sub> / KÎ¦
                            </div>
                            <div class="equation-box">
                                <div class="eq-title">Generated EMF</div>
                                E<sub>g</sub> = PÎ¦ZN / 60A
                            </div>
                            <div class="equation-box">
                                <div class="eq-title">Power (Mechanical)</div>
                                P = 2Ï€NT / 60
                            </div>
                            <div class="equation-box">
                                <div class="eq-title">Efficiency</div>
                                Î· = P<sub>out</sub> / P<sub>in</sub> Ã— 100%
                            </div>
                        </div>
                    </div>

                    <div id="tab-types" class="theory-content">
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                            <div
                                style="padding: 1.25rem; background: var(--bg-app); border-radius: 1rem; border: 1px solid var(--border);">
                                <h5 style="font-weight: 700; color: var(--text-head); margin-bottom: 0.5rem;">ðŸ”Œ
                                    Separately Excited</h5>
                                <p style="color: var(--text-body); font-size: 0.9rem; line-height: 1.6;">Field winding
                                    powered by external DC source. Provides excellent speed control and is used in
                                    precision applications.</p>
                            </div>
                            <div
                                style="padding: 1.25rem; background: var(--bg-app); border-radius: 1rem; border: 1px solid var(--border);">
                                <h5 style="font-weight: 700; color: var(--text-head); margin-bottom: 0.5rem;">âš¡ Shunt
                                    (Parallel)</h5>
                                <p style="color: var(--text-body); font-size: 0.9rem; line-height: 1.6;">Field parallel
                                    to armature. Nearly constant speed regardless of load. Used in lathes, fans, and
                                    centrifugal pumps.</p>
                            </div>
                            <div
                                style="padding: 1.25rem; background: var(--bg-app); border-radius: 1rem; border: 1px solid var(--border);">
                                <h5 style="font-weight: 700; color: var(--text-head); margin-bottom: 0.5rem;">ðŸ”— Series
                                </h5>
                                <p style="color: var(--text-body); font-size: 0.9rem; line-height: 1.6;">Field in series
                                    with armature. High starting torque. Used in cranes, hoists, and electric traction
                                    (trains).</p>
                            </div>
                            <div
                                style="padding: 1.25rem; background: var(--bg-app); border-radius: 1rem; border: 1px solid var(--border);">
                                <h5 style="font-weight: 700; color: var(--text-head); margin-bottom: 0.5rem;">ðŸ”€
                                    Compound</h5>
                                <p style="color: var(--text-body); font-size: 0.9rem; line-height: 1.6;">Combination of
                                    shunt and series. Offers good starting torque with stable speed. Used in rolling
                                    mills and elevators.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        const state = {
            mode: 'motor', paused: false,
            voltage: 120, field: 100, resistance: 0.5, load: 50,
            speedInput: 1500, excitation: 100, loadRes: 10,
            speed: 1350, rotationAngle: 0,
            viewRotateX: -15, viewRotateY: -25,
            isDragging: false, lastMouseX: 0, lastMouseY: 0
        };
        const K = 0.1;
        const motor3d = document.getElementById('motor3d');
        const rotor3d = document.getElementById('rotor3d');
        const scene3d = document.getElementById('scene3d');
        const battery = document.getElementById('battery');
        const bulb = document.getElementById('bulb');
        const bulbGlass = document.getElementById('bulbGlass');

        function init() {
            setupEventListeners();
            simulate();
            animate();
            updateView();
        }

        function setupEventListeners() {
            document.querySelectorAll('.mode-tab').forEach(tab => tab.addEventListener('click', () => switchMode(tab.dataset.mode)));
            document.querySelectorAll('.theory-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.theory-tab').forEach(t => t.classList.toggle('active', t === tab));
                    document.querySelectorAll('.theory-content').forEach(c => c.classList.toggle('active', c.id === 'tab-' + tab.dataset.tab));
                });
            });

            scene3d.addEventListener('mousedown', e => { state.isDragging = true; state.lastMouseX = e.clientX; state.lastMouseY = e.clientY; });
            document.addEventListener('mousemove', e => {
                if (!state.isDragging) return;
                state.viewRotateY += (e.clientX - state.lastMouseX) * 0.5;
                state.viewRotateX = Math.max(-60, Math.min(60, state.viewRotateX - (e.clientY - state.lastMouseY) * 0.5));
                state.lastMouseX = e.clientX; state.lastMouseY = e.clientY;
                updateView();
            });
            document.addEventListener('mouseup', () => state.isDragging = false);

            scene3d.addEventListener('touchstart', e => { state.isDragging = true; state.lastMouseX = e.touches[0].clientX; state.lastMouseY = e.touches[0].clientY; });
            document.addEventListener('touchmove', e => {
                if (!state.isDragging) return;
                state.viewRotateY += (e.touches[0].clientX - state.lastMouseX) * 0.5;
                state.viewRotateX = Math.max(-60, Math.min(60, state.viewRotateX - (e.touches[0].clientY - state.lastMouseY) * 0.5));
                state.lastMouseX = e.touches[0].clientX; state.lastMouseY = e.touches[0].clientY;
                updateView();
            });
            document.addEventListener('touchend', () => state.isDragging = false);

            document.getElementById('voltageSlider').addEventListener('input', e => { state.voltage = parseFloat(e.target.value); document.getElementById('voltageValue').textContent = state.voltage + ' V'; document.getElementById('batteryLabel').textContent = state.voltage + 'V'; simulate(); });
            document.getElementById('fieldSlider').addEventListener('input', e => { state.field = parseFloat(e.target.value); document.getElementById('fieldValue').textContent = state.field + ' %'; simulate(); });
            document.getElementById('resistanceSlider').addEventListener('input', e => { state.resistance = parseFloat(e.target.value); document.getElementById('resistanceValue').textContent = state.resistance.toFixed(1) + ' Î©'; simulate(); });
            document.getElementById('loadSlider').addEventListener('input', e => { state.load = parseFloat(e.target.value); document.getElementById('loadValue').textContent = state.load + ' %'; simulate(); });
            document.getElementById('speedInputSlider').addEventListener('input', e => { state.speedInput = parseFloat(e.target.value); document.getElementById('speedInputValue').textContent = state.speedInput + ' RPM'; simulate(); });
            document.getElementById('excitationSlider').addEventListener('input', e => { state.excitation = parseFloat(e.target.value); document.getElementById('excitationValue').textContent = state.excitation + ' %'; simulate(); });
            document.getElementById('loadResSlider').addEventListener('input', e => { state.loadRes = parseFloat(e.target.value); document.getElementById('loadResValue').textContent = state.loadRes + ' Î©'; simulate(); });

            document.getElementById('resetBtn').addEventListener('click', reset);
            document.getElementById('pauseBtn').addEventListener('click', togglePause);
            document.getElementById('themeToggle').addEventListener('click', () => { document.documentElement.classList.toggle('dark'); localStorage.setItem('px_theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light'); });
        }

        function updateView() { motor3d.style.transform = `rotateX(${state.viewRotateX}deg) rotateY(${state.viewRotateY}deg)`; }

        function switchMode(mode) {
            state.mode = mode;
            document.querySelectorAll('.mode-tab').forEach(t => t.classList.toggle('active', t.dataset.mode === mode));
            document.getElementById('vizTitle').textContent = mode === 'motor' ? '3D DC Motor' : '3D DC Generator';
            document.getElementById('motorControls').style.display = mode === 'motor' ? 'block' : 'none';
            document.getElementById('generatorControls').style.display = mode === 'generator' ? 'block' : 'none';
            document.getElementById('motorGauges').style.display = mode === 'motor' ? 'grid' : 'none';
            document.getElementById('generatorGauges').style.display = mode === 'generator' ? 'grid' : 'none';
            battery.style.display = mode === 'motor' ? 'block' : 'none';
            bulb.style.display = mode === 'generator' ? 'block' : 'none';
            simulate();
        }

        function simulate() {
            if (state.mode === 'motor') {
                const V = state.voltage, phi = state.field / 100, Ra = state.resistance, loadFactor = state.load / 100;
                const Ia = (V / Ra) * loadFactor * 0.5;
                const Eb = Math.max(0, V - (Ia * Ra));
                const N = (Eb / (K * phi)) * 10;
                const T = K * phi * Ia * 100;
                const P = (T * N * Math.PI) / 30000;
                state.speed = Math.max(0, N);
                gsap.to('#emfOutput', { textContent: Eb.toFixed(0), duration: 0.3, snap: { textContent: 1 } });
                gsap.to('#speedOutput', { textContent: N.toFixed(0), duration: 0.3, snap: { textContent: 1 } });
                gsap.to('#torqueOutput', { textContent: T.toFixed(1), duration: 0.3, snap: { textContent: 0.1 } });
                gsap.to('#currentOutput', { textContent: Ia.toFixed(1), duration: 0.3, snap: { textContent: 0.1 } });
                document.getElementById('rotationText').textContent = N.toFixed(0) + ' RPM';
                document.getElementById('powerText').textContent = P.toFixed(2) + ' kW';
            } else {
                const N = state.speedInput, phi = state.excitation / 100, RL = state.loadRes, Ra = 0.5;
                const Eg = 0.15 * phi * N;
                const IL = Eg / (Ra + RL);
                const Vt = IL * RL;
                const Pout = Vt * IL;
                state.speed = N;
                gsap.to('#genVoltageOutput', { textContent: Vt.toFixed(0), duration: 0.3, snap: { textContent: 1 } });
                gsap.to('#genCurrentOutput', { textContent: IL.toFixed(1), duration: 0.3, snap: { textContent: 0.1 } });
                gsap.to('#genPowerOutput', { textContent: (Pout / 1000).toFixed(2), duration: 0.3, snap: { textContent: 0.01 } });
                gsap.to('#bulbPower', { textContent: Pout.toFixed(0), duration: 0.3, snap: { textContent: 1 } });
                document.getElementById('rotationText').textContent = N.toFixed(0) + ' RPM';
                document.getElementById('powerText').textContent = (Pout / 1000).toFixed(2) + ' kW';
                document.getElementById('bulbLabel').textContent = Pout.toFixed(0) + 'W';
                const brightness = Math.min(1, Pout / 5000);
                if (brightness > 0.1) { bulbGlass.classList.add('on'); bulbGlass.style.filter = `brightness(${0.5 + brightness * 1.5})`; }
                else { bulbGlass.classList.remove('on'); }
            }
        }

        function animate() {
            if (!state.paused && state.speed > 0) { state.rotationAngle += state.speed / 300; rotor3d.style.transform = `rotateZ(${state.rotationAngle}deg)`; }
            requestAnimationFrame(animate);
        }

        function reset() {
            state.voltage = 120; state.field = 100; state.resistance = 0.5; state.load = 50;
            state.speedInput = 1500; state.excitation = 100; state.loadRes = 10;
            document.getElementById('voltageSlider').value = 120; document.getElementById('voltageValue').textContent = '120 V'; document.getElementById('batteryLabel').textContent = '120V';
            document.getElementById('fieldSlider').value = 100; document.getElementById('fieldValue').textContent = '100 %';
            document.getElementById('resistanceSlider').value = 0.5; document.getElementById('resistanceValue').textContent = '0.5 Î©';
            document.getElementById('loadSlider').value = 50; document.getElementById('loadValue').textContent = '50 %';
            document.getElementById('speedInputSlider').value = 1500; document.getElementById('speedInputValue').textContent = '1500 RPM';
            document.getElementById('excitationSlider').value = 100; document.getElementById('excitationValue').textContent = '100 %';
            document.getElementById('loadResSlider').value = 10; document.getElementById('loadResValue').textContent = '10 Î©';
            simulate();
        }

        function togglePause() {
            state.paused = !state.paused;
            document.getElementById('pauseIcon').textContent = state.paused ? 'play_arrow' : 'pause';
            document.getElementById('pauseText').textContent = state.paused ? 'Resume' : 'Pause';
            document.getElementById('statusBadge').innerHTML = state.paused ? '<span class="w-2 h-2 rounded-full bg-yellow-500"></span> Paused' : '<span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> Running';
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>