<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorable: Time Series Data</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script src="https://unpkg.com/lucide@latest"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        cyber: {
                            bg: '#020617', // Slate 950
                            card: 'rgba(30, 41, 59, 0.5)',
                            accent: '#38bdf8', // Sky 400
                            muted: '#94a3b8'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #020617;
            color: #f8fafc;
            overflow-x: hidden;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        /* Custom Range Slider */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #38bdf8;
            cursor: pointer;
            margin-top: -6px;
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }

        .gradient-text {
            background: linear-gradient(to right, #38bdf8, #818cf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>

<body class="antialiased selection:bg-sky-500/30">

    <section class="min-h-screen flex flex-col justify-center items-center px-6 py-20 relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none">
            <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-sky-500 rounded-full blur-[128px]"></div>
            <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-indigo-500 rounded-full blur-[128px]"></div>
        </div>

        <div class="max-w-3xl w-full z-10 text-center space-y-8">
            <div
                class="inline-flex items-center justify-center p-4 rounded-full bg-sky-500/10 border border-sky-500/20 mb-4 animate-pulse">
                <i data-lucide="activity" class="w-12 h-12 text-sky-400"></i>
            </div>

            <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight">
                Not a Photograph.<br>
                <span class="gradient-text">A Movie.</span>
            </h1>

            <div class="prose prose-invert prose-lg mx-auto text-slate-300 leading-relaxed">
                <p>
                    Imagine you take a photo of a highway. You see 50 cars. Are they stuck in traffic? Are they speeding
                    at 100mph? <strong>You can't tell.</strong> A single data point is frozen.
                </p>
                <p>
                    Now imagine a 10-second video of that same highway. Suddenly, you see movement, speed, and patterns.
                </p>
                <p class="font-semibold text-white">
                    <br>
                    Time Series Data is that video.
                    <br>
                </p>
                <p class="text-sm text-slate-400 uppercase tracking-widest pt-4">It connects the dots to reveal the
                    story.</p>
            </div>

            <div class="pt-10">
                <div class="animate-bounce">
                    <i data-lucide="arrow-down" class="w-6 h-6 mx-auto text-slate-500"></i>
                </div>
            </div>
        </div>
    </section>

    <section class="min-h-screen flex flex-col items-center justify-center px-4 py-12 bg-slate-900/50 relative">
        <div class="w-full max-w-5xl">

            <div class="mb-8 text-center">
                <h2 class="text-3xl font-bold mb-2">The Signal Synthesizer</h2>
                <p class="text-slate-400">Construct your own time series by mixing its three fundamental ingredients.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

                <div class="glass-panel p-6 rounded-2xl space-y-8 order-2 lg:order-1 h-fit">

                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <label class="text-sm font-semibold text-sky-400 flex items-center gap-2">
                                <i data-lucide="trending-up" class="w-4 h-4"></i> TREND
                            </label>
                            <span id="trend-val" class="font-mono text-xs text-slate-400">0.0</span>
                        </div>
                        <input type="range" id="trend" min="-1.5" max="1.5" step="0.1" value="0.5">
                        <p class="text-xs text-slate-500 mt-2">The long-term direction. Is the value generally going up
                            or down?</p>
                    </div>

                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <label class="text-sm font-semibold text-indigo-400 flex items-center gap-2">
                                <i data-lucide="waves" class="w-4 h-4"></i> SEASONALITY
                            </label>
                            <span id="season-val" class="font-mono text-xs text-slate-400">20.0</span>
                        </div>
                        <input type="range" id="seasonality" min="0" max="50" step="1" value="20">
                        <p class="text-xs text-slate-500 mt-2">Repeating patterns. Think weekends, seasons, or business
                            hours.</p>
                    </div>

                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <label class="text-sm font-semibold text-rose-400 flex items-center gap-2">
                                <i data-lucide="zap" class="w-4 h-4"></i> NOISE
                            </label>
                            <span id="noise-val" class="font-mono text-xs text-slate-400">5.0</span>
                        </div>
                        <input type="range" id="noise" min="0" max="40" step="1" value="5">
                        <p class="text-xs text-slate-500 mt-2">Randomness. Unpredictable chaos or measurement errors.
                        </p>
                    </div>

                    <div class="pt-4 border-t border-white/10">
                        <button id="reset-btn"
                            class="w-full py-2 rounded-lg bg-white/5 hover:bg-white/10 text-xs font-mono transition-colors">RESET
                            SIMULATION</button>
                    </div>
                </div>

                <div class="lg:col-span-2 order-1 lg:order-2">
                    <div class="glass-panel p-1 rounded-2xl relative group">
                        <canvas id="ts-canvas" class="w-full h-[400px] rounded-xl bg-slate-950"></canvas>

                        <div
                            class="absolute top-4 right-4 flex flex-col items-end gap-1 opacity-50 group-hover:opacity-100 transition-opacity">
                            <div class="flex items-center gap-2">
                                <span class="text-xs font-mono text-slate-400">Time (t)</span>
                                <i data-lucide="arrow-right" class="w-3 h-3 text-slate-500"></i>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-xs font-mono text-slate-400">Value (y)</span>
                                <i data-lucide="arrow-up" class="w-3 h-3 text-slate-500"></i>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 text-center">
                        <code
                            class="text-sm md:text-base font-mono bg-black/30 px-4 py-2 rounded-lg border border-white/5 text-slate-300">
                            y(t) = <span class="text-sky-400" id="math-trend">Trend</span> + <span class="text-indigo-400" id="math-season">Seasonality</span> + <span class="text-rose-400" id="math-noise">Noise</span>
                        </code>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="max-w-6xl mx-auto px-6 py-20 pb-32">
        <h2 class="text-3xl font-bold mb-10 border-l-4 border-sky-500 pl-4">Deconstructing the Data</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">

            <div class="glass-panel p-6 rounded-xl md:col-span-2 lg:col-span-2">
                <div class="flex items-start justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-white mb-2">Time Series Analysis</h3>
                        <p class="text-slate-400 text-sm leading-relaxed">
                            A sequence of data points indexed in time order. Unlike standard data analysis, the
                            <strong>order</strong> matters strictly. The goal is often forecasting (predicting the
                            future) or explanation (understanding the past).
                        </p>
                    </div>
                    <i data-lucide="database" class="w-8 h-8 text-sky-500 opacity-80"></i>
                </div>
            </div>

            <div
                class="glass-panel p-6 rounded-xl md:col-span-2 lg:col-span-2 bg-gradient-to-br from-white/5 to-transparent">
                <h3 class="text-lg font-bold text-white mb-2">Additive Model</h3>
                <div class="text-xs font-mono text-sky-300 mb-3">$$ Y_t = T_t + S_t + \epsilon_t $$</div>
                <p class="text-slate-400 text-xs">
                    We mathematically "decompose" complex real-world data (like stock prices or weather) into the three
                    components you just played with: Trend (T), Seasonality (S), and Error/Noise ($\epsilon$).
                </p>
            </div>

            <div class="glass-panel p-5 rounded-xl border-t-2 border-sky-500">
                <h4 class="font-bold text-sky-400 mb-1">Trend</h4>
                <p class="text-xs text-slate-400">The underlying long-term movement in the series.</p>
                <div class="mt-4 h-1 w-full bg-slate-800 rounded overflow-hidden">
                    <div class="h-full bg-sky-500 w-3/4"></div>
                </div>
            </div>

            <div class="glass-panel p-5 rounded-xl border-t-2 border-indigo-500">
                <h4 class="font-bold text-indigo-400 mb-1">Seasonality</h4>
                <p class="text-xs text-slate-400">Regular, repeating fluctuations (e.g., holiday sales).</p>
                <div class="mt-4 flex justify-between items-end h-4">
                    <div class="w-1 h-2 bg-indigo-500"></div>
                    <div class="w-1 h-4 bg-indigo-500"></div>
                    <div class="w-1 h-2 bg-indigo-500"></div>
                    <div class="w-1 h-4 bg-indigo-500"></div>
                </div>
            </div>

            <div class="glass-panel p-5 rounded-xl border-t-2 border-rose-500">
                <h4 class="font-bold text-rose-400 mb-1">Residuals</h4>
                <p class="text-xs text-slate-400">What remains after removing trend and seasonality.</p>
                <div class="mt-4 flex gap-1 h-4 items-center">
                    <div class="w-1 h-1 bg-rose-500 rounded-full"></div>
                    <div class="w-1 h-3 bg-rose-500 rounded-full"></div>
                    <div class="w-1 h-1 bg-rose-500 rounded-full"></div>
                </div>
            </div>

            <div class="glass-panel p-5 rounded-xl">
                <h4 class="font-bold text-white mb-1">Stationarity</h4>
                <p class="text-xs text-slate-400">
                    A crucial concept. A stationary time series has constant mean and variance over time. Most
                    forecasting models require data to be made stationary first.
                </p>
            </div>

        </div>
    </section>

    <script>
        // 1. INITIAL SETUP
        lucide.createIcons();

        const canvas = document.getElementById('ts-canvas');
        const ctx = canvas.getContext('2d');

        // Handling DPI for crisp rendering
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();

        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);

        // Simulation State
        // We use a "Target" state and a "Current" state to allow GSAP to interpolate between them
        const state = {
            trend: 0.5,
            seasonality: 20,
            noise: 5,
            timeOffset: 0 // For animation loop
        };

        const targetState = {
            trend: 0.5,
            seasonality: 20,
            noise: 5
        };

        // DOM Elements
        const inputs = {
            trend: document.getElementById('trend'),
            seasonality: document.getElementById('seasonality'),
            noise: document.getElementById('noise')
        };

        const displays = {
            trend: document.getElementById('trend-val'),
            seasonality: document.getElementById('season-val'),
            noise: document.getElementById('noise-val'),
            mathTrend: document.getElementById('math-trend'),
            mathSeason: document.getElementById('math-season'),
            mathNoise: document.getElementById('math-noise')
        };

        // 2. INPUT HANDLING
        function updateTarget(key, value) {
            targetState[key] = parseFloat(value);
            displays[key].innerText = targetState[key].toFixed(1);

            // Animate state towards target using GSAP
            gsap.to(state, {
                [key]: targetState[key],
                duration: 0.8,
                ease: "power2.out"
            });

            // Update Math Display text
            if (key === 'trend') displays.mathTrend.innerText = `${targetState.trend}t`;
            if (key === 'seasonality') displays.mathSeason.innerText = `${targetState.seasonality}sin(t)`;
            if (key === 'noise') displays.mathNoise.innerText = `${targetState.noise}Îµ`;
        }

        Object.keys(inputs).forEach(key => {
            inputs[key].addEventListener('input', (e) => updateTarget(key, e.target.value));
        });

        document.getElementById('reset-btn').addEventListener('click', () => {
            // Reset Inputs
            inputs.trend.value = 0.5;
            inputs.seasonality.value = 20;
            inputs.noise.value = 5;

            // Trigger updates
            updateTarget('trend', 0.5);
            updateTarget('seasonality', 20);
            updateTarget('noise', 5);
        });

        // 3. GENERATION LOGIC
        // We generate a set of points based on current STATE
        const numPoints = 100;
        // Pre-generate noise to keep it consistent but allow amplitude scaling
        // This prevents the noise from "jumping" crazily when we only want to change amplitude
        const baseNoise = Array.from({ length: numPoints }, () => (Math.random() - 0.5) * 2);

        function generateData() {
            const data = [];
            const width = rect.width;
            const height = rect.height;
            const step = width / numPoints;

            // Center Y
            const baseline = height / 2;

            for (let i = 0; i < numPoints; i++) {
                // x coordinate
                const x = i * step;

                // Normalized time (0 to 1 across canvas)
                const t = i / numPoints;

                // 1. Trend Component (Linear)
                // We scale it so max trend takes it near top/bottom
                const trendComp = -1 * state.trend * (t * height * 0.8 - (height * 0.4));

                // 2. Seasonality Component (Sine Wave)
                // Frequency is fixed for simplicity, amplitude is controlled
                const frequency = 20; // How many waves fits
                const seasonalityComp = Math.sin((t * frequency) + state.timeOffset) * state.seasonality;

                // 3. Noise Component
                const noiseComp = baseNoise[i] * state.noise;

                // Combine (Additive Model)
                const y = baseline + trendComp + seasonalityComp + noiseComp;

                data.push({ x, y });
            }
            return data;
        }

        // 4. RENDER LOOP
        function draw() {
            // Update time offset for the "moving" effect of the seasonality
            state.timeOffset += 0.05;

            // Clear Canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Grid Lines (Background)
            ctx.strokeStyle = 'rgba(255,255,255,0.05)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            for (let i = 0; i < rect.width; i += 40) { ctx.moveTo(i, 0); ctx.lineTo(i, rect.height); }
            for (let i = 0; i < rect.height; i += 40) { ctx.moveTo(0, i); ctx.lineTo(rect.width, i); }
            ctx.stroke();

            // Generate Points
            const points = generateData();

            // Draw Line
            ctx.beginPath();
            ctx.moveTo(points[0].x, points[0].y);

            // Curve through points
            for (let i = 0; i < points.length - 1; i++) {
                const p0 = points[i];
                const p1 = points[i + 1];
                // Linear interpolation for technical feel, or quadratic for smooth
                // Let's go with straight lines to emphasize the "Data" aspect, 
                // but since points are dense it looks smooth.
                ctx.lineTo(p1.x, p1.y);
            }

            // Styling the line
            ctx.lineJoin = 'round';
            ctx.lineCap = 'round';
            ctx.lineWidth = 3;

            // Gradient Stroke
            const gradient = ctx.createLinearGradient(0, 0, rect.width, 0);
            gradient.addColorStop(0, '#38bdf8'); // Sky
            gradient.addColorStop(1, '#818cf8'); // Indigo
            ctx.strokeStyle = gradient;

            ctx.stroke();

            // Draw Glow
            ctx.shadowBlur = 10;
            ctx.shadowColor = 'rgba(56, 189, 248, 0.5)';
            ctx.stroke();
            ctx.shadowBlur = 0;

            // Loop
            requestAnimationFrame(draw);
        }

        // Handle Resize
        window.addEventListener('resize', () => {
            const newRect = canvas.getBoundingClientRect();
            canvas.width = newRect.width * dpr;
            canvas.height = newRect.height * dpr;
            ctx.scale(dpr, dpr);
        });

        // Start
        draw();

    </script>
</body>

</html>