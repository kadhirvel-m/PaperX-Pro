<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TuNe X — Create Project</title>
  <meta name="description"
    content="Create and publish your project/startup post with a modern, material-inspired UI." />
  <!-- Tailwind (match index page plugins) -->
  <link rel="stylesheet" href="../assets/css/tailwind.css" />
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        container: { center: true, padding: '1rem' },
        extend: {
          fontFamily: { display: ['Inter', 'ui-sans-serif', 'system-ui', '-apple-system', 'Segoe UI', 'Roboto', 'Ubuntu', 'Cantarell', 'Noto Sans', 'sans-serif'] },
          colors: {
            brand: { 50: '#eef4ff', 100: '#d9e6ff', 200: '#b3ccff', 300: '#88adff', 400: '#628fff', 500: '#3f6fff', 600: '#2f56e6', 700: '#2846bb', 800: '#223a95', 900: '#1c2f78' },
            ink: { 50: '#f7f7f9', 900: '#0c0f14' }
          },
          boxShadow: {
            'brand-lg': '0 10px 30px rgba(63,111,255,.25)',
            'soft': '0 6px 20px rgba(0,0,0,.08)'
          },
          backgroundImage: {
            'grid-radial': 'radial-gradient(1200px 600px at 90% -10%, rgba(63,111,255,.25), transparent 60%), radial-gradient(700px 400px at -10% 10%, rgba(99,102,241,.20), transparent 60%)',
            'glass': 'linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,.35))',
            'glass-dark': 'linear-gradient(180deg, rgba(20,24,33,.6), rgba(20,24,33,.35))'
          },
          borderRadius: { '3xl': '1.5rem' }
        }
      }
    }
  </script>
  <!-- Material Symbols -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@300;400;600&display=swap"
    rel="stylesheet">
  <style>
    .icon {
      font-family: 'Material Symbols Outlined';
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24
    }

    /* Minimal helpers for selectable chips and segmented buttons (no @apply) */
    .chip {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      padding: .375rem .75rem;
      border-radius: 9999px;
      border: 1px solid rgb(0 0 0 / .1);
      background: rgba(255, 255, 255, .8);
      cursor: pointer;
      transition: background .2s ease
    }

    html.dark .chip {
      border-color: rgba(255, 255, 255, .1);
      background: rgba(24, 24, 27, .6)
    }

    .chip:hover {
      background: rgba(0, 0, 0, .05)
    }

    html.dark .chip:hover {
      background: rgba(255, 255, 255, .1)
    }

    .chip.sel {
      background: #2f56e6;
      color: #fff;
      border-color: transparent;
      box-shadow: 0 6px 20px rgba(47, 86, 230, .25)
    }

    .seg {
      display: inline-flex;
      gap: .25rem;
      padding: .25rem;
      border-radius: .75rem;
      border: 1px solid rgba(0, 0, 0, .1);
      background: rgba(255, 255, 255, .8)
    }

    html.dark .seg {
      border-color: rgba(255, 255, 255, .1);
      background: rgba(24, 24, 27, .6)
    }

    .seg>button {
      padding: .375rem .75rem;
      border-radius: .5rem
    }

    .seg>button.on {
      background: #2f56e6;
      color: #fff;
      box-shadow: 0 6px 20px rgba(47, 86, 230, .25)
    }

    .dropzone {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: .5rem;
      border: 2px dashed rgba(0, 0, 0, .15);
      border-radius: 1rem;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: all .2s ease
    }

    html.dark .dropzone {
      border-color: rgba(255, 255, 255, .2)
    }

    .dropzone.hover {
      border-color: #628fff;
      background: rgba(98, 143, 255, .08)
    }
  </style>
  <script>
    // Theme persistence (match index)
    const initTheme = () => {
      const stored = localStorage.getItem('cx-theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if ((stored === 'dark') || (!stored && prefersDark)) document.documentElement.classList.add('dark');
    };
    initTheme();
    const toggleTheme = () => {
      const d = document.documentElement.classList.toggle('dark');
      localStorage.setItem('cx-theme', d ? 'dark' : 'light');
    };
  </script>
  <script src="config.js"></script>
</head>

<body
  class="bg-ink-50 dark:bg-[#0a0d12] text-[#0d1117] dark:text-zinc-100 selection:bg-brand-200 selection:text-ink-900 min-h-screen">
  <!-- ===== NAV (like index) ===== -->
  <header
    class="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-black/30 border-b border-black/5 dark:border-white/10">
    <nav class="container flex items-center gap-3 py-3">
      <a href="index.html" class="flex items-center gap-2 font-semibold tracking-tight">
        <span
          class="inline-flex h-8 w-8 items-center justify-center rounded-xl bg-brand-600 text-white shadow-brand-lg">CX</span>
        <span class="hidden sm:inline">TuNe X</span>
      </a>
      <div class="ml-auto hidden md:flex items-center gap-6 text-sm">
        <a href="index.html#features" class="hover:text-brand-600 dark:hover:text-brand-300">Features</a>
        <a href="index.html#workflows" class="hover:text-brand-600 dark:hover:text-brand-300">Agentic Tools</a>
        <a href="index.html#discover" class="hover:text-brand-600 dark:hover:text-brand-300">Discover</a>
        <a href="index.html#faq" class="hover:text-brand-600 dark:hover:text-brand-300">FAQ</a>
        <div class="relative" id="navProjectsWrap">
          <button type="button" id="navProjectsBtn"
            class="inline-flex items-center gap-2 px-3 py-2 rounded-xl hover:bg-black/5 dark:hover:bg-white/10 transition">
            <span class="icon text-base leading-none">hub</span>
            <span>Project Portal</span>
            <span class="icon text-base leading-none">expand_more</span>
          </button>
          <div id="navProjectsMenu"
            class="absolute right-0 mt-2 w-60 rounded-xl border border-black/10 dark:border-white/10 bg-white/95 dark:bg-zinc-900/95 shadow-lg backdrop-blur hidden">
            <a href="postings.html"
              class="flex items-center gap-2 px-4 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10 rounded-t-xl"><span
                class="icon text-base leading-none">folder_open</span>Project Postings</a>
            <a href="project_post.html"
              class="flex items-center gap-2 px-4 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10"><span
                class="icon text-base leading-none">add_circle</span>Create Project</a>
            <a href="incoming_requests.html"
              class="flex items-center gap-2 px-4 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10"><span
                class="icon text-base leading-none">inbox</span>Incoming Requests</a>
            <a href="my_applications.html"
              class="flex items-center gap-2 px-4 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10"><span
                class="icon text-base leading-none">assignment_ind</span>My Applications</a>
            <a href="skill-test.html"
              class="flex items-center gap-2 px-4 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10 rounded-b-xl"><span
                class="icon text-base leading-none">verified</span>Skill Test Portal</a>
          </div>
        </div>
        <a href="../login.html" class="hover:text-brand-600 dark:hover:text-brand-300">Sign in</a>
        <a href="signup.html"
          class="inline-flex items-center gap-2 rounded-xl border border-black/10 dark:border-white/10 px-4 py-2 hover:bg-black/5 dark:hover:bg-white/10"><span
            class="icon">person_add</span> Sign up</a>
        <!-- Profile avatar (shown when logged in) -->
        <a id="navProfile" href="profile.html" title="Profile"
          class="hidden inline-flex items-center justify-center w-9 h-9 rounded-full overflow-hidden border border-black/10 dark:border-white/10 bg-white/70 dark:bg-zinc-900/60">
          <img id="navProfileImg" alt="Profile" class="w-full h-full object-cover hidden" />
          <span id="navProfileInitial" class="text-xs font-semibold">Me</span>
        </a>
        <button onclick="toggleTheme()" class="rounded-lg px-3 py-2 hover:bg-black/5 dark:hover:bg-white/10"
          title="Toggle theme"><span class="icon align-[-4px]">dark_mode</span></button>
        <a href="#"
          class="inline-flex items-center gap-2 rounded-xl bg-brand-600 text-white px-4 py-2 shadow-brand-lg hover:brightness-110"><span
            class="icon">bolt</span> Create Project</a>
      </div>
      <div class="md:hidden flex items-center gap-2">
        <button onclick="toggleTheme()" class="rounded-lg px-3 py-2 hover:bg-black/5 dark:hover:bg-white/10"><span
            class="icon">dark_mode</span></button>
        <a id="navProfileMobile" href="profile.html" title="Profile"
          class="hidden inline-flex items-center justify-center w-8 h-8 rounded-full overflow-hidden border border-black/10 dark:border-white/10 bg-white/70 dark:bg-zinc-900/60">
          <img id="navProfileMobileImg" alt="Profile" class="w-full h-full object-cover hidden" />
          <span id="navProfileMobileInitial" class="text-[10px] font-semibold">Me</span>
        </a>
        <button id="menuBtn" class="rounded-lg px-3 py-2 hover:bg-black/5 dark:hover:bg-white/10"><span
            class="icon">menu</span></button>
      </div>
    </nav>
    <div id="mobileMenu" class="md:hidden hidden border-t border-black/5 dark:border-white/10">
      <div class="container py-2 grid gap-1">
        <a href="index.html#features" class="px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10">Features</a>
        <a href="index.html#workflows" class="px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10">Agentic
          Tools</a>
        <a href="index.html#discover" class="px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10">Discover</a>
        <a href="index.html#faq" class="px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10">FAQ</a>
        <div class="relative" id="navProjectsMobileWrap">
          <button type="button" id="navProjectsBtnMobile"
            class="flex w-full items-center justify-between px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10">
            <span>Project Portal</span>
            <span class="icon text-base leading-none">expand_more</span>
          </button>
          <div id="navProjectsMenuMobile" class="mt-1 hidden flex-col gap-1 pl-3">
            <a href="postings.html" class="px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10 text-sm">Project
              Postings</a>
            <a href="project_post.html"
              class="px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10 text-sm">Create Project</a>
            <a href="incoming_requests.html"
              class="px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10 text-sm">Incoming Requests</a>
            <a href="my_applications.html"
              class="px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10 text-sm">My Applications</a>
            <a href="skill-test.html" class="px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10 text-sm">Skill
              Test Portal</a>
          </div>
        </div>
        <a href="../login.html" class="px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10">Sign in</a>
        <a href="signup.html"
          class="px-3 py-2 rounded-lg border border-black/10 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/10">Sign
          up</a>
      </div>
    </div>
  </header>

  <!-- BG Accent -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 bg-grid-radial opacity-80 dark:opacity-60 pointer-events-none"></div>
    <div class="container relative pt-8 pb-6">
      <div
        class="rounded-3xl border border-black/10 dark:border-white/10 bg-glass dark:bg-glass-dark p-5 md:p-6 shadow-soft">
        <div class="flex items-center gap-2 text-sm opacity-70 mb-1"><span class="icon">rocket_launch</span> Create
          Project</div>
        <h1 class="text-2xl md:text-3xl font-extrabold tracking-tight">Publish your project or startup</h1>
        <p class="text-sm md:text-base text-black/70 dark:text-white/70 mt-1">Describe the idea, tech stack, timeline
          and open roles. Use the gallery to add visuals.</p>
      </div>
    </div>
  </section>

  <!-- Main form -->
  <main class="container pb-24">
    <form id="projectForm" class="grid gap-4 md:gap-5">
      <!-- BASICS -->
      <section class="rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-zinc-900/60 p-5">
        <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2"><span class="icon">badge</span> Basics</h2>
        <div class="mt-4 grid md:grid-cols-2 gap-4">
          <div>
            <label class="text-sm">Project title *</label>
            <input name="title" required placeholder="Title"
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
            <p class="text-xs text-black/60 dark:text-white/60 mt-1">Clear, searchable name</p>
          </div>
          <div>
            <label class="text-sm">One‑line tagline *</label>
            <input name="tagline" required maxlength="120" placeholder="Tagline"
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
            <p class="text-xs text-black/60 dark:text-white/60 mt-1">Max 120 characters</p>
          </div>
        </div>
        <div class="mt-4">
          <p class="text-sm">Domain *</p>
          <div id="domainChips" class="mt-2 flex flex-wrap gap-2">
            <button type="button" data-val="AI/ML" class="chip text-sm">AI/ML</button>
            <button type="button" data-val="Healthcare" class="chip text-sm">Healthcare</button>
            <button type="button" data-val="Agriculture" class="chip text-sm">Agriculture</button>
            <button type="button" data-val="FinTech" class="chip text-sm">FinTech</button>
            <button type="button" data-val="EdTech" class="chip text-sm">EdTech</button>
            <button type="button" data-val="Robotics" class="chip text-sm">Robotics</button>
          </div>
          <input type="hidden" name="domains" id="domainsField" />
        </div>
        <div class="mt-4">
          <label class="text-sm">Description *</label>
          <textarea name="description" rows="6" required placeholder="Describe what you’re building, why, and how."
            class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60"></textarea>
        </div>
        <div class="mt-4">
          <label class="text-sm">Tech stack (comma separated)</label>
          <input name="tech_stack" placeholder="Python, FastAPI, PyTorch, Next.js, Supabase"
            class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
        </div>
      </section>

      <!-- STATUS & TIMELINE -->
      <section class="rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-zinc-900/60 p-5">
        <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2"><span class="icon">schedule</span> Status &
          Timeline</h2>
        <div class="mt-4 flex flex-wrap items-center gap-3">
          <div class="seg" id="statusSeg">
            <button type="button" data-val="Idea" class="on">Idea</button>
            <button type="button" data-val="Prototype">Prototype</button>
            <button type="button" data-val="In Development">In Dev</button>
            <button type="button" data-val="Beta">Beta</button>
            <button type="button" data-val="Launched">Launched</button>
          </div>
          <input type="hidden" name="status" id="statusField" value="Idea" />
        </div>
        <div class="mt-4 grid md:grid-cols-3 gap-4">
          <div>
            <label class="text-sm">Start date</label>
            <input type="date" name="start_date" placeholder="yyyy-mm-dd"
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
          </div>
          <div>
            <label class="text-sm">Expected end</label>
            <input type="date" name="end_date" placeholder="yyyy-mm-dd"
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
          </div>
          <div>
            <label class="text-sm">Milestone</label>
            <input id="milestoneInput" placeholder="Key milestone (enter + Add)"
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
          </div>
        </div>
        <div class="mt-3">
          <button type="button" id="addMilestone"
            class="rounded-xl border border-black/10 dark:border-white/10 px-4 py-2 hover:bg-black/5 dark:hover:bg-white/10">Add
            milestone</button>
          <div id="milestoneList" class="mt-3 grid gap-2"></div>
        </div>
      </section>

      <!-- LINKS & MEDIA -->
      <section class="rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-zinc-900/60 p-5">
        <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2"><span class="icon">link</span> Links &
          Media</h2>
        <div class="mt-4 grid md:grid-cols-2 gap-4">
          <div>
            <label class="text-sm">GitHub repo</label>
            <input name="github" placeholder="https://github.com/user/repo"
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
          </div>
          <div>
            <label class="text-sm">Live demo URL</label>
            <input name="demo" placeholder="https://demo.example.com"
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
          </div>
          <div>
            <label class="text-sm">Video URL</label>
            <input name="video" placeholder="https://youtu.be/..."
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
          </div>
          <div>
            <label class="text-sm">Docs / Notion</label>
            <input name="docs" placeholder="https://notion.so/..."
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
          </div>
        </div>
        <div class="mt-4 grid md:grid-cols-2 gap-4">
          <div>
            <p class="text-sm">Cover image</p>
            <div id="coverDrop" class="dropzone">
              <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none">
                <path d="M12 16V8M8 12h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
              <p class="text-sm">Drag & drop or click to upload</p>
              <input type="file" name="cover" accept="image/*" class="hidden" />
            </div>
            <div id="coverPreviewBox" class="mt-3 hidden">
              <img id="coverPreview" alt="Cover preview" class="w-full max-h-48 rounded-xl object-cover" />
            </div>
            <p class="text-xs text-black/60 dark:text-white/60 mt-1">PNG/JPG up to 5MB</p>
          </div>
          <div>
            <p class="text-sm">Gallery</p>
            <div id="galleryDrop" class="dropzone">
              <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none">
                <path d="M4 7h16M4 12h16M4 17h10" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
              <p class="text-sm">Upload multiple images/videos</p>
              <input type="file" name="gallery" multiple class="hidden" />
            </div>
            <p class="text-xs text-black/60 dark:text-white/60 mt-1">Images/MP4 up to 50MB each</p>
          </div>
        </div>
      </section>

      <!-- REQUEST FUNDING -->
      <section class="rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-zinc-900/60 p-5">
        <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2"><span class="icon">paid</span> Request
          Funding</h2>
        <div class="mt-4 grid md:grid-cols-3 gap-4">
          <div>
            <p class="text-sm mb-2">Stage</p>
            <div class="seg" id="fundSeg">
              <button type="button" data-val="Bootstrapped" class="on">Bootstrapped</button>
              <button type="button" data-val="Grant">Grant</button>
              <button type="button" data-val="Pre‑seed">Pre‑seed</button>
              <button type="button" data-val="Seed">Seed</button>
            </div>
            <input type="hidden" name="fund_stage" id="fundField" value="Bootstrapped" />
          </div>
          <div>
            <label class="text-sm">Budget / Ask (₹)</label>
            <input name="fund_budget" type="number" min="0" placeholder="₹"
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
          </div>
          <div>
            <label class="text-sm">Use of funds</label>
            <input name="fund_use" placeholder="Data, compute, hiring…"
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
          </div>
        </div>
      </section>

      <!-- TEAM & OPEN ROLES -->
      <section class="rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-zinc-900/60 p-5">
        <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2"><span class="icon">group</span> Team & Open
          Roles</h2>
        <div class="mt-4">
          <label class="text-sm">Current team (emails or names)</label>
          <input name="team" placeholder="alice@x.com, bob@x.com"
            class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
        </div>
        <div class="mt-4 grid md:grid-cols-3 gap-4">
          <div>
            <p class="text-sm">Roles needed</p>
            <div id="roleChips" class="mt-2 flex flex-wrap gap-2">
              <button type="button" data-val="Frontend Engineer" class="chip text-sm">Frontend</button>
              <button type="button" data-val="Backend Engineer" class="chip text-sm">Backend</button>
              <button type="button" data-val="ML Engineer" class="chip text-sm">ML Engineer</button>
              <button type="button" data-val="Data Scientist" class="chip text-sm">Data Scientist</button>
              <button type="button" data-val="Designer" class="chip text-sm">Designer</button>
              <button type="button" data-val="PM" class="chip text-sm">PM</button>
              <button type="button" data-val="Researcher" class="chip text-sm">Researcher</button>
              <button type="button" data-val="DevOps" class="chip text-sm">DevOps</button>
            </div>
            <input type="hidden" name="roles" id="rolesField" />
          </div>
          <div>
            <p class="text-sm mb-2">Compensation</p>
            <div class="seg" id="compSeg">
              <button type="button" data-val="Volunteer" class="on">Volunteer</button>
              <button type="button" data-val="Stipend">Stipend</button>
              <button type="button" data-val="Paid">Paid</button>
              <button type="button" data-val="Paid + Equity">Paid + Equity</button>
            </div>
            <input type="hidden" name="compensation" id="compField" value="Volunteer" />
          </div>
          <div>
            <label class="text-sm">Weekly hours</label>
            <input name="hours" placeholder="8‑12 hrs/week"
              class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60" />
          </div>
        </div>
        <div class="mt-4">
          <label class="text-sm">Role description / vacancy post</label>
          <textarea name="role_desc" rows="4" placeholder="Responsibilities, stack, outcomes…"
            class="mt-1 w-full rounded-xl border-black/10 dark:border-white/10 bg-white/80 dark:bg-zinc-900/60"></textarea>
        </div>
      </section>

      <!-- Spacer for sticky footer -->
      <div class="h-16"></div>
    </form>
  </main>

  <!-- Sticky Submit Bar (glass) -->
  <footer class="fixed inset-x-0 bottom-0 z-40">
    <div class="container py-3">
      <div
        class="rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-zinc-900/60 p-3 flex flex-col md:flex-row gap-3 md:items-center md:justify-between shadow-soft">
        <div class="text-sm text-black/70 dark:text-white/70">Review your details before submitting.</div>
        <div class="flex gap-2">
          <button id="saveDraft"
            class="rounded-xl border border-black/10 dark:border-white/10 px-4 py-2 hover:bg-black/5 dark:hover:bg-white/10">Save
            Draft</button>
          <button id="resetForm"
            class="rounded-xl border border-black/10 dark:border-white/10 px-4 py-2 hover:bg-black/5 dark:hover:bg-white/10">Reset</button>
          <button id="submitBtn"
            class="rounded-xl bg-brand-600 text-white px-5 py-2 shadow-brand-lg hover:brightness-110">Submit
            Project</button>
        </div>
      </div>
    </div>
  </footer>

  <script>
    const d = document;
    // Determine API base
    const API = ((window.API_BASE || window.__API_BASE || 'http://127.0.0.1:8000')).replace(/\/$/, '');

    // Enforce auth for posting
    const token = localStorage.getItem('px_token');
    if (!token) {
      // Soft redirect to sign-in
      window.location.href = '../login.html';
    }

    // mobile menu
    const menuBtn = d.getElementById('menuBtn');
    const mobileMenu = d.getElementById('mobileMenu');
    if (menuBtn) menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

    // Auth-aware navbar avatar like index
    if (token) {
      d.querySelectorAll('a[href="../login.html"], a[href="signup.html"]').forEach(el => el.classList.add('hidden'));
      const navProfile = d.getElementById('navProfile');
      const navProfileImg = d.getElementById('navProfileImg');
      const navProfileInitial = d.getElementById('navProfileInitial');
      const navProfileMobile = d.getElementById('navProfileMobile');
      const navProfileMobileImg = d.getElementById('navProfileMobileImg');
      const navProfileMobileInitial = d.getElementById('navProfileMobileInitial');
      if (navProfile) navProfile.classList.remove('hidden');
      if (navProfileMobile) navProfileMobile.classList.remove('hidden');
      fetch(`${API}/api/profile`, { headers: { Authorization: `Bearer ${token}` } })
        .then(r => r.ok ? r.json() : null)
        .then(p => {
          if (!p) return;
          let initials = 'ME';
          if (p.name) initials = p.name.split(' ').filter(Boolean).map(s => s[0]?.toUpperCase()).slice(0, 2).join('');
          if (navProfileInitial) navProfileInitial.textContent = initials;
          if (navProfileMobileInitial) navProfileMobileInitial.textContent = initials;
          if (p.profile_image_url) {
            if (navProfileImg) { navProfileImg.src = p.profile_image_url; navProfileImg.classList.remove('hidden'); if (navProfileInitial) navProfileInitial.classList.add('hidden'); }
            if (navProfileMobileImg) { navProfileMobileImg.src = p.profile_image_url; navProfileMobileImg.classList.remove('hidden'); if (navProfileMobileInitial) navProfileMobileInitial.classList.add('hidden'); }
          }
        }).catch(() => { });
    }

    // Segmented selectors
    function makeSeg(groupSel, fieldSel) {
      const group = d.getElementById(groupSel);
      const field = d.getElementById(fieldSel);
      group.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          group.querySelectorAll('button').forEach(b => b.classList.remove('on'));
          btn.classList.add('on');
          field.value = btn.dataset.val;
        });
      });
    }
    makeSeg('statusSeg', 'statusField');
    makeSeg('fundSeg', 'fundField');
    makeSeg('compSeg', 'compField');

    // Chips (multi)
    function makeChips(containerId, fieldId) {
      const container = d.getElementById(containerId);
      const field = d.getElementById(fieldId);
      const sync = () => { const vals = Array.from(container.querySelectorAll('.chip.sel')).map(c => c.dataset.val); field.value = vals.join(','); };
      container.querySelectorAll('.chip').forEach(ch => {
        ch.addEventListener('click', () => { ch.classList.toggle('sel'); sync(); });
      });
    }
    makeChips('domainChips', 'domainsField');
    makeChips('roleChips', 'rolesField');

    // Milestones dynamic
    const msInput = d.getElementById('milestoneInput');
    const msList = d.getElementById('milestoneList');
    d.getElementById('addMilestone').addEventListener('click', () => {
      const v = (msInput.value || '').trim();
      if (!v) return;
      const row = d.createElement('div');
      row.className = 'flex items-center justify-between gap-2 p-2 rounded-xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-zinc-900/60';
      row.innerHTML = `<span class="text-sm">${v}</span><button type="button" class="text-xs px-2 py-1 rounded-lg border border-black/10 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/10">Remove</button>`;
      row.querySelector('button').addEventListener('click', () => row.remove());
      msList.appendChild(row);
      msInput.value = '';
    });

    // Drag & drop
    function makeDrop(zoneId, onChange) {
      const zone = d.getElementById(zoneId);
      if (!zone) return null;
      const input = zone.querySelector('input');
      if (!input) return null;
      const openPicker = () => input.click();
      zone.addEventListener('click', openPicker);
      ['dragenter', 'dragover'].forEach(evt => zone.addEventListener(evt, e => { e.preventDefault(); zone.classList.add('hover'); }));
      ['dragleave', 'drop'].forEach(evt => zone.addEventListener(evt, e => { e.preventDefault(); zone.classList.remove('hover'); }));
      const triggerChange = () => {
        if (typeof onChange === 'function') {
          onChange(input.files);
        }
      };
      zone.addEventListener('drop', (e) => {
        input.files = e.dataTransfer.files;
        input.dispatchEvent(new Event('change'));
      });
      input.addEventListener('change', triggerChange);
      return { zone, input };
    }
    const coverPreviewImg = d.getElementById('coverPreview');
    const coverPreviewBox = d.getElementById('coverPreviewBox');
    let coverPreviewUrl = null;
    const setCoverPreview = (file) => {
      if (!coverPreviewImg || !coverPreviewBox) return;
      if (coverPreviewUrl) {
        URL.revokeObjectURL(coverPreviewUrl);
        coverPreviewUrl = null;
      }
      if (file) {
        coverPreviewUrl = URL.createObjectURL(file);
        coverPreviewImg.src = coverPreviewUrl;
        coverPreviewBox.classList.remove('hidden');
      } else {
        coverPreviewImg.removeAttribute('src');
        coverPreviewBox.classList.add('hidden');
      }
    };
    const coverDrop = makeDrop('coverDrop', (files) => setCoverPreview(files && files[0]));
    makeDrop('galleryDrop');

    // Draft
    const STORAGE_KEY = 'connextx_project_draft_v3';
    function serialize() {
      const f = d.getElementById('projectForm');
      const fd = new FormData(f);
      const get = (n) => (fd.get(n) || '').toString().trim();
      const domains = (get('domains') || '').split(',').filter(Boolean);
      const roles = (get('roles') || '').split(',').filter(Boolean);
      const milestones = Array.from(msList.querySelectorAll('span')).map(el => el.textContent);
      return {
        basics: { title: get('title'), tagline: get('tagline'), domains, description: get('description'), tech_stack: (get('tech_stack') || '').split(',').map(s => s.trim()).filter(Boolean) },
        status: { status: get('status'), start_date: get('start_date'), end_date: get('end_date'), milestones },
        links: { github: get('github'), demo: get('demo'), video: get('video'), docs: get('docs') },
        funding: { stage: get('fund_stage'), budget_inr: Number(get('fund_budget') || 0), use: get('fund_use') },
        team: { members: (get('team') || '').split(',').map(s => s.trim()).filter(Boolean), roles_hiring: roles, compensation: get('compensation'), hours: get('hours'), role_desc: get('role_desc') }
      }
    }
    function restore() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY); if (!raw) return; const data = JSON.parse(raw);
        const f = d.getElementById('projectForm');
        f.title.value = data?.basics?.title || '';
        f.tagline.value = data?.basics?.tagline || '';
        f.description.value = data?.basics?.description || '';
        f.tech_stack.value = (data?.basics?.tech_stack || []).join(', ');
        const sel = new Set(data?.basics?.domains || []);
        d.querySelectorAll('#domainChips .chip').forEach(c => { if (sel.has(c.dataset.val)) c.classList.add('sel'); });
        d.getElementById('domainsField').value = (data?.basics?.domains || []).join(',');
        d.getElementById('statusField').value = data?.status?.status || 'Idea';
        d.querySelectorAll('#statusSeg button').forEach(b => { b.classList.toggle('on', b.dataset.val === (data?.status?.status || 'Idea')); });
        f.start_date.value = data?.status?.start_date || '';
        f.end_date.value = data?.status?.end_date || '';
        (data?.status?.milestones || []).forEach(m => { d.getElementById('milestoneInput').value = m; d.getElementById('addMilestone').click(); });
        f.github.value = data?.links?.github || ''; f.demo.value = data?.links?.demo || ''; f.video.value = data?.links?.video || ''; f.docs.value = data?.links?.docs || '';
        d.getElementById('fundField').value = data?.funding?.stage || 'Bootstrapped';
        d.querySelectorAll('#fundSeg button').forEach(b => { b.classList.toggle('on', b.dataset.val === (data?.funding?.stage || 'Bootstrapped')); });
        f.fund_budget.value = data?.funding?.budget_inr || 0; f.fund_use.value = data?.funding?.use || '';
        f.team.value = (data?.team?.members || []).join(', ');
        const rsel = new Set(data?.team?.roles_hiring || []);
        d.querySelectorAll('#roleChips .chip').forEach(c => { if (rsel.has(c.dataset.val)) c.classList.add('sel'); });
        d.getElementById('rolesField').value = (data?.team?.roles_hiring || []).join(',');
        d.getElementById('compField').value = data?.team?.compensation || 'Volunteer';
        d.querySelectorAll('#compSeg button').forEach(b => { b.classList.toggle('on', b.dataset.val === (data?.team?.compensation || 'Volunteer')); });
        f.hours.value = data?.team?.hours || ''; f.role_desc.value = data?.team?.role_desc || '';
      } catch (e) { console.warn('restore failed', e); }
    }
    restore();

    d.getElementById('saveDraft').addEventListener('click', () => {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(serialize()));
      alert('Draft saved locally.');
    });
    d.getElementById('resetForm').addEventListener('click', () => {
      localStorage.removeItem(STORAGE_KEY);
      d.getElementById('projectForm').reset();
      d.querySelectorAll('.chip').forEach(c => c.classList.remove('sel'));
      d.getElementById('milestoneList').innerHTML = '';
      setCoverPreview(null);
      if (coverDrop && coverDrop.input) coverDrop.input.value = '';
    });

    // Submit wiring — create project then upload media
    async function uploadMedia(projectId) {
      const coverInput = d.querySelector('#coverDrop input[type="file"][name="cover"]');
      const galleryInput = d.querySelector('#galleryDrop input[type="file"][name="gallery"]');
      // Cover
      if (coverInput && coverInput.files && coverInput.files[0]) {
        const fd = new FormData();
        fd.append('kind', 'cover');
        fd.append('file', coverInput.files[0]);
        const r = await fetch(`${API}/api/projects/${projectId}/upload`, { method: 'POST', headers: { Authorization: `Bearer ${token}` }, body: fd });
        const payload = await r.json().catch(() => ({}));
        if (!r.ok) throw new Error(payload?.detail || 'Cover upload failed');
        if (payload?.project?.cover_url && coverPreviewImg) {
          if (coverPreviewUrl) {
            URL.revokeObjectURL(coverPreviewUrl);
            coverPreviewUrl = null;
          }
          coverPreviewImg.src = payload.project.cover_url;
          coverPreviewBox?.classList.remove('hidden');
        }
      }
      // Gallery (sequential)
      if (galleryInput && galleryInput.files && galleryInput.files.length) {
        for (const file of galleryInput.files) {
          const fd = new FormData();
          fd.append('kind', 'gallery');
          fd.append('file', file);
          const rg = await fetch(`${API}/api/projects/${projectId}/upload`, { method: 'POST', headers: { Authorization: `Bearer ${token}` }, body: fd });
          if (!rg.ok) throw new Error('Gallery upload failed');
        }
      }
    }

    d.getElementById('submitBtn').addEventListener('click', async () => {
      try {
        const payload = serialize();
        // Basic required checks
        if (!payload.basics.title || !payload.basics.tagline || !payload.basics.description) {
          alert('Please fill title, tagline and description.');
          return;
        }
        // Create project
        const res = await fetch(`${API}/api/projects`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },
          body: JSON.stringify(payload)
        });
        const data = await res.json().catch(() => ({}));
        if (!res.ok) throw new Error(data.detail || 'Project create failed');
        const projectId = data.id;
        // Upload media if any
        await uploadMedia(projectId);
        // Clear draft and notify
        localStorage.removeItem(STORAGE_KEY);
        alert('Project submitted successfully!');
        // Redirect to profile or home
        window.location.href = 'index.html#discover';
      } catch (e) {
        alert(e.message || 'Submission failed');
      }
    });
  </script>
</body>

</html>